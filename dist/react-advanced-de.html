<!DOCTYPE html>

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta http-equiv="X-UA-Compatible" content="ie=edge">
  <title>React Fortgeschritten</title>
  <style>/*

Original highlight.js style (c) Ivan Sagalaev <maniac@softwaremaniacs.org>

*/

.hljs {
  display: block;
  overflow-x: auto;
  padding: 0.5em;
  background: #F0F0F0;
}


/* Base color: saturation 0; */

.hljs,
.hljs-subst {
  color: #444;
}

.hljs-comment {
  color: #888888;
}

.hljs-keyword,
.hljs-attribute,
.hljs-selector-tag,
.hljs-meta-keyword,
.hljs-doctag,
.hljs-name {
  font-weight: bold;
}


/* User color: hue: 0 */

.hljs-type,
.hljs-string,
.hljs-number,
.hljs-selector-id,
.hljs-selector-class,
.hljs-quote,
.hljs-template-tag,
.hljs-deletion {
  color: #880000;
}

.hljs-title,
.hljs-section {
  color: #880000;
  font-weight: bold;
}

.hljs-regexp,
.hljs-symbol,
.hljs-variable,
.hljs-template-variable,
.hljs-link,
.hljs-selector-attr,
.hljs-selector-pseudo {
  color: #BC6060;
}


/* Language color: hue: 90; */

.hljs-literal {
  color: #78A960;
}

.hljs-built_in,
.hljs-bullet,
.hljs-code,
.hljs-addition {
  color: #397300;
}


/* Meta color: hue: 200 */

.hljs-meta {
  color: #1f7199;
}

.hljs-meta-string {
  color: #4d99bf;
}


/* Misc effects */

.hljs-emphasis {
  font-style: italic;
}

.hljs-strong {
  font-weight: bold;
}
</style>
</head>

<body>
  <div id="canvas">
    <div id="canvas-content">

      <section class="section" id="section-1"><section class="slide" id="slide-1-1">
        <h1 id="hooks">Hooks</h1>

      </section><section class="slide" id="slide-1-2">
        <h2 id="hooks">Hooks</h2>
<p>Hooks: Erweiterung von funktionalen Komponenten; erlauben die Verwendung von state und anderen Features ohne Klassen</p>

      </section><section class="slide" id="slide-1-3">
        <h2 id="hooks">Hooks</h2>
<blockquote>
<p>&quot;In the longer term, we expect Hooks to be the primary way people write React components.&quot;</p>
</blockquote>
<p>- <a href="https://reactjs.org/docs/hooks-faq.html#should-i-use-hooks-classes-or-a-mix-of-both">React FAQ</a></p>

      </section><section class="slide" id="slide-1-4">
        <h2 id="hooks-derzeitiger-stand">Hooks: derzeitiger Stand</h2>
<ul>
<li>Dokumentation für Einsteiger noch sehr Klassen-orientiert</li>
<li>Eingeschränkte Unterstützung der React developer tools (<a href="https://github.com/facebook/react-devtools/issues/1215">GitHub issue</a>)</li>
<li>Keine Unterstützung durch die Test Library <em>enzyme</em></li>
</ul>

      </section><section class="slide" id="slide-1-5">
        <h2 id="wichtige-hooks">wichtige Hooks</h2>
<ul>
<li>state Hook</li>
<li>effect Hook</li>
<li>context Hook</li>
<li>reducer Hook</li>
</ul>

      </section></section><section class="section" id="section-2"><section class="slide" id="slide-2-1">
        <h1 id="state-hook">state Hook</h1>

      </section><section class="slide" id="slide-2-2">
        <h2 id="state-hook">state Hook</h2>
<p>Die Funktion <code>useState</code> kann zu Beginn der Komponentenfunktion (wiederholt) aufgerufen werden. Sie hat die folgende Signatur:</p>
<ul>
<li>sie nimmt einen Parameter entgegen - den initialen Zustand</li>
<li>sie gibt bei jedem Aufruf zwei Werte zurück: Den aktuellen Zustand sowie eine Funktion, mit der der Zustand neu gesetzt werden kann</li>
</ul>
<pre><code class="language-js"><span class="hljs-keyword">const</span> App = <span class="hljs-function"><span class="hljs-params">()</span> =&gt;</span> {
  <span class="hljs-keyword">const</span> [count, setCount] = useState(<span class="hljs-number">0</span>);

  <span class="hljs-keyword">return</span> ...
};</code></pre>

      </section></section><section class="section" id="section-3"><section class="slide" id="slide-3-1">
        <h1 id="reducer-hook">Reducer Hook</h1>

      </section><section class="slide" id="slide-3-2">
        <h2 id="state-managment--reducer-hook">State Managment &amp; Reducer Hook</h2>
<p>In komplexeren Anwendungen macht es Sinn, den Anwendungszustand (model) von der Ansicht (view) zu trennen. Dies kann durch externe State Managment Libreries, wie <em>redux</em>, oder auch durch den sogenannten <em>reducer Hook</em> erfolgen</p>
<p>Oft wird der gesamte Anwendungszustand durch ein Datenmodell repräsentiert. Jede Änderung am Anwendungszustand läuft über das Datenmodell.</p>

      </section><section class="slide" id="slide-3-3">
        <h2 id="reducer-hook">Reducer Hook</h2>
<p>Bei State Managment Tools geschieht jede Änderung am Anwendungszustand üblicherweise durch ein <em>Event</em> / eine <em>Action</em>. Bei Verwendung des Reducer Hooks oder von Redux hat eine action üblicherweise einen <em>type</em> und (optional) eine <em>payload</em>:</p>
<pre><code class="language-json">{
  <span class="hljs-attr">"type"</span>: <span class="hljs-string">"ADD_TODO"</span>,
  <span class="hljs-attr">"payload"</span>: {
    <span class="hljs-attr">"title"</span>: <span class="hljs-string">"learn react"</span>
  }
}</code></pre>

      </section><section class="slide" id="slide-3-4">
        <h2 id="reducer-hook">reducer Hook</h2>
<p>State management mit Reducern:</p>
<p>Beim <em>reducer Hook</em> bzw <em>Redux</em>:</p>
<p>Der Übergang von einem State auf den nächsten geschieht mittels einer Reducer-Funktion:</p>
<p>Die Reducer-Funktion erhält als Funktionsparameter den alten Zustand (State) und eine Action, die eine Zustandsänderung beschreibt.</p>
<p>Die Reducer-Funktion gibt den neuen Zustand zurück.</p>

      </section><section class="slide" id="slide-3-5">
        <h2 id="reducer-hook">reducer Hook</h2>
<p>Der reducer Hook wird ähnlich eingebunden wie der state hook:</p>
<p>Allgemein:</p>
<pre><code class="language-js"><span class="hljs-keyword">const</span> [state, dispatch] = useReducer(reducer, initialState);</code></pre>
<p>Konkretes Beispiel count:</p>
<pre><code class="language-js"><span class="hljs-keyword">const</span> [count, countDispatch] = useReducer(countReducer, <span class="hljs-number">0</span>);</code></pre>

      </section><section class="slide" id="slide-3-6">
        <h2 id="reducer-hook">reducer Hook</h2>
<pre><code class="language-js"><span class="hljs-keyword">const</span> countReducer = <span class="hljs-function">(<span class="hljs-params">count, action</span>) =&gt;</span> {
  <span class="hljs-keyword">switch</span> (action.type) {
    <span class="hljs-keyword">case</span> <span class="hljs-string">'INCREMENT'</span>:
      <span class="hljs-keyword">return</span> count + <span class="hljs-number">1</span>;
    <span class="hljs-keyword">case</span> <span class="hljs-string">'DECREMENT'</span>:
      <span class="hljs-keyword">return</span> count - <span class="hljs-number">1</span>;
    <span class="hljs-keyword">default</span>:
      <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-built_in">Error</span>(<span class="hljs-string">'unknown action'</span>);
  }
};</code></pre>

      </section><section class="slide" id="slide-3-7">
        <h2 id="reducer-hook">reducer Hook</h2>
<p>Auslösen von Actions: wir rufen die <code>dispatch</code>-Funktion des Reducers mit der gewünschten Action als Parameter auf</p>

      </section></section><section class="section" id="section-4"><section class="slide" id="slide-4-1">
        <h1 id="komponenten-lebenszyklus">Komponenten-Lebenszyklus</h1>

      </section><section class="slide" id="slide-4-2">
        <h2 id="komponenten-lebenszyklus">Komponenten-Lebenszyklus</h2>
<p>In React können bestimmte Ereignisse im Lebenszyklus einer Komponente abgefragt werden. Insbesondere sind folgende Ereignisse oft von Interesse:</p>
<ul>
<li>die Komponente wurde neu eingebunden</li>
<li>state oder props der Komponente haben sich geändert</li>
<li>die Komponente wird entfernt</li>
</ul>

      </section><section class="slide" id="slide-4-3">
        <h2 id="komponenten-lebenszyklus">Komponenten-Lebenszyklus</h2>
<p>Einsatzgebiete der genannten Ereignisse:</p>
<ul>
<li>Abfragen von APIs</li>
<li>manuelle Änderungen am DOM</li>
<li>Aufräumen vor dem Entfernen einer Komponente</li>
</ul>

      </section><section class="slide" id="slide-4-4">
        <h2 id="komponenten-lebenszyklus">Komponenten-Lebenszyklus</h2>
<p>Die Ereignisse können wie folgt abgefragt werden:</p>
<p>In Klassenkomponenten mittels Lebenszyklus-Methoden:</p>
<ul>
<li><code>componentDidMount</code></li>
<li><code>componentDidUpdate</code></li>
<li><code>componentWillUnmount</code></li>
</ul>
<p>In funktionalen Komponenten mittels <code>useEffect</code></p>

      </section><section class="slide" id="slide-4-5">
        <h2 id="beispiel-documenttitle-komponente">Beispiel: DocumentTitle-Komponente</h2>
<p>Wir erstellen eine Komponente, die den Dokumenttitel dynamisch setzen kann:</p>
<pre><code class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">DocumentTitle</span>&gt;</span>my custom title<span class="hljs-tag">&lt;/<span class="hljs-name">DocumentTitle</span>&gt;</span></code></pre>
<p>Diese Komponente kann irgendwo in der React-Anwendung vorkommen.</p>

      </section><section class="slide" id="slide-4-6">
        <h2 id="beispiel-documenttitle-komponente">Beispiel: DocumentTitle-Komponente</h2>
<p>Als Klassenkomponente</p>
<pre><code class="language-jsx"><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">DocumentTitle</span> <span class="hljs-keyword">extends</span> <span class="hljs-title">Component</span> </span>{
  componentDidMount() {
    <span class="hljs-built_in">document</span>.title = <span class="hljs-keyword">this</span>.props.children;
  }

  componentDidUpdate(prevProps, prevState) {
    <span class="hljs-built_in">document</span>.title = <span class="hljs-keyword">this</span>.props.children;
  }

  render() {
    <span class="hljs-keyword">return</span> <span class="hljs-literal">null</span>;
  }
}</code></pre>

      </section><section class="slide" id="slide-4-7">
        <h2 id="beispiel-documenttitle-komponente">Beispiel: DocumentTitle-Komponente</h2>
<p>mit useEffect</p>
<pre><code class="language-jsx"><span class="hljs-keyword">const</span> DocumentTitle = <span class="hljs-function"><span class="hljs-params">props</span> =&gt;</span> {
  useEffect(<span class="hljs-function"><span class="hljs-params">()</span> =&gt;</span> {
    <span class="hljs-built_in">document</span>.title = props.children;
  });

  <span class="hljs-keyword">return</span> <span class="hljs-literal">null</span>;
};</code></pre>

      </section><section class="slide" id="slide-4-8">
        <h2 id="beispiel-clock-komponente">Beispiel: Clock-Komponente</h2>

      </section><section class="slide" id="slide-4-9">
        <h2 id="beispiel-clock-komponente">Beispiel: Clock-Komponente</h2>
<p>Als Klassenkomponente:</p>
<pre><code class="language-jsx">  <span class="hljs-keyword">constructor</span>() {
    <span class="hljs-keyword">super</span>();
    <span class="hljs-keyword">this</span>.state = {
      <span class="hljs-attr">time</span>: <span class="hljs-keyword">new</span> <span class="hljs-built_in">Date</span>().toLocaleTimeString()
    };
  }

  render() {
    <span class="hljs-keyword">return</span> <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span>{this.state.time}<span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span>;
  }</code></pre>

      </section><section class="slide" id="slide-4-10">
        <h2 id="beispiel-clock-komponente">Beispiel: Clock-Komponente</h2>
<pre><code class="language-jsx">  componentDidMount() {
    <span class="hljs-keyword">this</span>.intervalId = setInterval(<span class="hljs-function"><span class="hljs-params">()</span> =&gt;</span> {
      <span class="hljs-keyword">this</span>.setState({
        <span class="hljs-attr">time</span>: <span class="hljs-keyword">new</span> <span class="hljs-built_in">Date</span>().toLocaleTimeString()
      });
    }, <span class="hljs-number">1000</span>);
  }

  componentWillUnmount() {
    clearInterval(<span class="hljs-keyword">this</span>.intervalId);
  }</code></pre>

      </section><section class="slide" id="slide-4-11">
        <h2 id="useeffect-im-detail">useEffect im Detail</h2>
<p><code>useEffect</code> bekommt zwei Parameter übergeben: Eine Funktion und ein Array von Werten.</p>
<p>Die Funktion nach dem Rendering einer Komponente ausgeführt, wenn sich einer der Werte geändert hat.</p>
<p>Die Funktion wird auch ausgeführt, wenn die Komponente neu eingebunden und zum ersten Mal gerendert wurde.</p>

      </section><section class="slide" id="slide-4-12">
        <h2 id="useeffect-im-detail">useEffect im Detail</h2>
<p>Wenn kein zweiter Parameter übergeben wird, wird die Funktion nach jedem Rendering ausgeführt.</p>
<p>Wenn ein leeres Array als zweiter Parameter übergeben wird, wird die Funktion nur nach dem ersten Rendering ausgeführt.</p>
<p>Es gibt auch die Möglichkeit, eine Funktion zu definieren, die vor dem <em>Entfernen</em> einer Komponente aufgerufen wird (mehr dazu später).</p>

      </section><section class="slide" id="slide-4-13">
        <h2 id="useeffect-beispiel-weather">useEffect: Beispiel: Weather</h2>
<pre><code class="language-js"><span class="hljs-keyword">const</span> [weatherData, setWeatherData] = useState(<span class="hljs-literal">null</span>);
<span class="hljs-keyword">const</span> [stale, setStale] = useState(<span class="hljs-literal">true</span>);

<span class="hljs-comment">// fetch data whenever data is stale</span>
useEffect(<span class="hljs-function"><span class="hljs-params">()</span> =&gt;</span> {
  <span class="hljs-keyword">if</span> (stale) {
    refetch();
  }
}, [stale]);</code></pre>

      </section><section class="slide" id="slide-4-14">
        <h2 id="useeffect-beispiel-weather">useEffect: Beispiel: Weather</h2>
<pre><code class="language-js"><span class="hljs-keyword">const</span> refetch = <span class="hljs-function"><span class="hljs-params">()</span> =&gt;</span> {
  fetch(
    <span class="hljs-string">'https://api.openweathermap.org/data/2.5/weather'</span> +
      <span class="hljs-string">`?q=<span class="hljs-subst">${city}</span>&amp;appid=<span class="hljs-subst">${API_KEY}</span>`</span>
  )
    .then(<span class="hljs-function"><span class="hljs-params">response</span> =&gt;</span> response.json())
    .then(<span class="hljs-function"><span class="hljs-params">data</span> =&gt;</span> {
      setWeatherData({ <span class="hljs-attr">temperature</span>: data.main.temp });
      setStale(<span class="hljs-literal">false</span>);
    });
};</code></pre>

      </section><section class="slide" id="slide-4-15">
        <h2 id="useeffect-entfernen-einer-komponente">useEffect: Entfernen einer Komponente</h2>
<pre><code class="language-jsx"><span class="hljs-keyword">const</span> Clock = <span class="hljs-function"><span class="hljs-params">()</span> =&gt;</span> {
  ...
  <span class="hljs-comment">// wird aufgerufen, wenn die Komponente eingebunden wird</span>
  useEffect(<span class="hljs-function"><span class="hljs-params">()</span> =&gt;</span> {
    <span class="hljs-keyword">const</span> intervalId = setInterval(<span class="hljs-function"><span class="hljs-params">()</span> =&gt;</span> {
      setTime(<span class="hljs-keyword">new</span> <span class="hljs-built_in">Date</span>().toLocaleTimeString());
    }, <span class="hljs-number">1000</span>);
    <span class="hljs-comment">// wird aufgerufen, wenn die Komponente entfernt wird</span>
    <span class="hljs-keyword">return</span> <span class="hljs-function"><span class="hljs-params">()</span> =&gt;</span> {
      clearInterval(intervalId);
    };
  }, []);
  ...
};</code></pre>

      </section></section><section class="section" id="section-5"><section class="slide" id="slide-5-1">
        <h1 id="automatisiertes-testen">Automatisiertes Testen</h1>

      </section><section class="slide" id="slide-5-2">
        <h2 id="automatisiertes-testen">Automatisiertes Testen</h2>
<p>Programme / Funktionen / Klassen können automatisiert getestet werden um sicherzustellen, dass sie wie erwartet funktionieren.</p>

      </section><section class="slide" id="slide-5-3">
        <h2 id="tools-für-das-testen">Tools für das Testen</h2>
<ul>
<li><em>node</em> wird als Runtime benötigt</li>
<li><em>assert</em>: einfache assertions, in node beinhaltet</li>
<li><em>Jest</em>: test runner &amp; assertion library</li>
<li><em>Jasmine</em>: test runner &amp; assertion library</li>
<li><em>Mocha</em>: test runner</li>
<li><em>Chai</em>: assertion library</li>
<li><em>Karma</em>: test runner</li>
<li><em>Enzyme</em>: test utilities &amp; assertions für React</li>
</ul>
<p><a href="https://2018.stateofjs.com/testing/overview/">https://2018.stateofjs.com/testing/overview/</a></p>

      </section><section class="slide" id="slide-5-4">
        <h2 id="beispiel-shorten">Beispiel: shorten</h2>
<p>Wir werden eine Funktion schreiben und testen, die einen String auf eine vorgegebene Länge verkürzt</p>
<pre><code class="language-js">shorten(<span class="hljs-string">'loremipsum'</span>, <span class="hljs-number">6</span>);
<span class="hljs-comment">// should return 'lor...'</span></code></pre>
<p>Mögliche Zugänge</p>
<ul>
<li>mit Implementierung beginnen</li>
<li>mit Tests beginnen (test-driven development)</li>
</ul>

      </section><section class="slide" id="slide-5-5">
        <h2 id="einrichten-des-test-runners">Einrichten des Test Runners</h2>
<p>in einem vorhandenen npm Projekt:</p>
<pre><code class="language-bash">npm install --save-dev jest</code></pre>
<p>in <em>package.json</em>:</p>
<pre><code class="language-json">&quot;scripts&quot;: {
  &quot;test&quot;: &quot;jest&quot;
}</code></pre>

      </section><section class="slide" id="slide-5-6">
        <h2 id="tests-ausführen">Tests ausführen</h2>
<pre><code class="language-bash">npm <span class="hljs-built_in">test</span></code></pre>
<p>Achtung: laufende Tests sollten immer abgebrochen werden, bevor <code>npm install ...</code> ausgeführt wird - sonst kann die Installation fehlschlagen</p>

      </section><section class="slide" id="slide-5-7">
        <h2 id="finden-von-tests">Finden von Tests</h2>
<p>Im allgemeinen suchen Test Libraries nach Dateien mit der Endung <code>.test.js</code> oder <code>.spec.js</code> in dem Ordner <code>test</code>.</p>
<p>Wir können auch ein eigenes Muster übergeben, z.B.:</p>
<pre><code class="language-bash">mocha <span class="hljs-string">"src/**/*.{test,spec}.{js,jsx}"</span></code></pre>

      </section><section class="slide" id="slide-5-8">
        <h2 id="test-coverage">test coverage</h2>
<p>Manche Testlibraries können berichten, wie viel des Codes von Tests abgedeckt ist:</p>
<p>Beispiel - in einem create-react-app Projekt:</p>
<pre><code class="language-bash">npm <span class="hljs-built_in">test</span> -- --coverage</code></pre>

      </section><section class="slide" id="slide-5-9">
        <h2 id="beispiel-shorten">Beispiel: shorten</h2>
<pre><code class="language-js"><span class="hljs-comment">// shorten.js</span>
<span class="hljs-keyword">const</span> shorten = <span class="hljs-function">(<span class="hljs-params">s, maxlength</span>) =&gt;</span> {
  <span class="hljs-keyword">if</span> (s.length &gt; maxlength) {
    s = s.slice(<span class="hljs-number">0</span>, maxlength - <span class="hljs-number">3</span>) + <span class="hljs-string">'...'</span>;
  }
  <span class="hljs-keyword">return</span> s;
};

<span class="hljs-built_in">module</span>.exports.shorten = shorten;</code></pre>

      </section><section class="slide" id="slide-5-10">
        <h2 id="beispiel-shorten">Beispiel: shorten</h2>
<pre><code class="language-js"><span class="hljs-comment">// shorten.test.js</span>
<span class="hljs-keyword">const</span> shorten = <span class="hljs-built_in">require</span>(<span class="hljs-string">'./shorten.js'</span>).shorten;
<span class="hljs-comment">// use node's built-in assert module</span>
<span class="hljs-keyword">const</span> assert = <span class="hljs-built_in">require</span>(<span class="hljs-string">'assert'</span>);

it(<span class="hljs-string">'shortens "loremipsum" to "lor..."'</span>, () =&gt; {
  <span class="hljs-keyword">const</span> expected = <span class="hljs-string">'lor...'</span>;
  <span class="hljs-keyword">const</span> actual = shorten(<span class="hljs-string">'loremipsum'</span>, <span class="hljs-number">6</span>);
  assert.equal(actual, expected);
});</code></pre>

      </section></section><section class="section" id="section-6"><section class="slide" id="slide-6-1">
        <h1 id="testen-assertions">Testen: assertions</h1>

      </section><section class="slide" id="slide-6-2">
        <h2 id="testen-assertions">Testen: assertions</h2>
<p>Assertions können auf zwei Arten geschrieben werden:</p>
<p>assert:</p>
<pre><code class="language-js">assert.equal(a, b);</code></pre>
<p>expect (behaviour-driven):</p>
<pre><code class="language-js">expect(a).toEqual(b);</code></pre>

      </section><section class="slide" id="slide-6-3">
        <h2 id="testen-assertions">Testen: assertions</h2>
<p>assert:</p>
<ul>
<li>assert-modul in node</li>
<li>chai</li>
</ul>
<p>expect (behaviour-driven)</p>
<ul>
<li>jest</li>
<li>jasmine</li>
<li>chai</li>
<li>enzyme</li>
</ul>

      </section><section class="slide" id="slide-6-4">
        <h2 id="testen-assertions">Testen: assertions</h2>
<p>assert (node):</p>
<pre><code class="language-js">assert.equal(a, b);
assert.deepEqual(a, b);
assert.throws(<span class="hljs-function"><span class="hljs-params">()</span> =&gt;</span> <span class="hljs-number">1</span> / <span class="hljs-number">0</span>);
<span class="hljs-comment">// ...</span></code></pre>
<p>assert (chai):</p>
<pre><code class="language-js">assert.equal(a, b);
assert.deepEqual(a, b);
assert.typeOf(foo, <span class="hljs-string">'string'</span>);
assert.lengthOf(foo, <span class="hljs-number">3</span>);
assert.throws(<span class="hljs-function"><span class="hljs-params">()</span> =&gt;</span> <span class="hljs-number">1</span> / <span class="hljs-number">0</span>);</code></pre>

      </section><section class="slide" id="slide-6-5">
        <h2 id="testen-assertions">Testen: assertions</h2>
<p>jest:</p>
<pre><code class="language-js">expect(a).toEqual(<span class="hljs-number">4</span>);
expect(a).not.toEqual(<span class="hljs-number">2</span>);
expect(a).toBeGreaterThan(<span class="hljs-number">3</span>);
expect(a).toBeInstanceOf(<span class="hljs-built_in">Number</span>);
expect(<span class="hljs-function"><span class="hljs-params">()</span> =&gt;</span> <span class="hljs-number">1</span> / <span class="hljs-number">0</span>).toThrow();</code></pre>
<p>chai:</p>
<pre><code class="language-js">expect(a).to.equal(<span class="hljs-number">4</span>);
expect(a).not.to.equal(<span class="hljs-number">2</span>);
expect(a).to.be.greaterThan(<span class="hljs-number">3</span>);
expect(a).to.be.a(<span class="hljs-string">'number'</span>);
expect(<span class="hljs-function"><span class="hljs-params">()</span> =&gt;</span> <span class="hljs-number">1</span> / <span class="hljs-number">0</span>).to.throw();</code></pre>

      </section></section><section class="section" id="section-7"><section class="slide" id="slide-7-1">
        <h1 id="strukturierung-von-tests">Strukturierung von Tests</h1>

      </section><section class="slide" id="slide-7-2">
        <h2 id="gruppieren">Gruppieren</h2>
<p>mit <code>describe()</code>:</p>
<pre><code class="language-js"><span class="hljs-comment">// jest</span>
describe(<span class="hljs-string">'strings that are short enough'</span>, () =&gt; {
  it(<span class="hljs-string">'leaves "abc" unchanged with limit 5'</span>, () =&gt; {
    expect(shorten(<span class="hljs-string">'abc'</span>, <span class="hljs-number">5</span>)).toEqual(<span class="hljs-string">'abc'</span>);
  });
  it(<span class="hljs-string">'leaves "loremipsum" unchanged with limit 10'</span>, () =&gt; {
    expect(shorten(<span class="hljs-string">'loremipsum'</span>, <span class="hljs-number">10</span>)).toEqual(<span class="hljs-string">'loremipsum'</span>);
  });
});</code></pre>

      </section><section class="slide" id="slide-7-3">
        <h2 id="setup-und-teardown">Setup und teardown</h2>
<p>Für Code, der vor und jedem Test in einer Gruppe ausgeführt werden soll:</p>
<pre><code class="language-js"><span class="hljs-comment">// jest or mocha</span>
beforeEach(<span class="hljs-function"><span class="hljs-params">()</span> =&gt;</span> {
  createTestDB();
});

afterEach(<span class="hljs-function"><span class="hljs-params">()</span> =&gt;</span> {
  clearTestDB();
});</code></pre>

      </section></section><section class="section" id="section-8"><section class="slide" id="slide-8-1">
        <h1 id="testen-von-react-anwendungen">Testen von React-Anwendungen</h1>

      </section><section class="slide" id="slide-8-2">
        <h2 id="test-renderer-für-react">Test Renderer für React</h2>
<ul>
<li><code>react-test-renderer</code> (vom React Team entwickelt)</li>
<li><code>Enzyme</code> (von Airbnb entwickelt)</li>
</ul>
<p>Enzyme bietet noch keine Unterstützung für Hooks</p>

      </section><section class="slide" id="slide-8-3">
        <h2 id="react-test-renderer---installation">React-Test-Renderer - Installation</h2>
<pre><code class="language-bash">npm install --save-dev react-test-renderer</code></pre>

      </section><section class="slide" id="slide-8-4">
        <h2 id="react-test-renderer---beispiel">React-Test-Renderer - Beispiel</h2>
<pre><code class="language-js"><span class="hljs-keyword">import</span> TestRenderer <span class="hljs-keyword">from</span> <span class="hljs-string">'react-test-renderer'</span>;

it(<span class="hljs-string">'renders a component without crashing'</span>, () =&gt; {
  <span class="hljs-keyword">const</span> instance = TestRenderer.create(<span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">MyComponent</span> /&gt;</span>)
    .root;
});</span></code></pre>

      </section><section class="slide" id="slide-8-5">
        <h2 id="enzyme---installation--einrichtung">Enzyme - Installation &amp; Einrichtung</h2>
<pre><code class="language-bash">npm install --save-dev enzyme enzyme-adapter-react-16</code></pre>
<p>neue Datei <code>src/setupTests.js</code>:</p>
<pre><code class="language-js"><span class="hljs-keyword">import</span> { configure } <span class="hljs-keyword">from</span> <span class="hljs-string">'enzyme'</span>;
<span class="hljs-keyword">import</span> Adapter <span class="hljs-keyword">from</span> <span class="hljs-string">'enzyme-adapter-react-16'</span>;

configure({ <span class="hljs-attr">adapter</span>: <span class="hljs-keyword">new</span> Adapter() });</code></pre>

      </section><section class="slide" id="slide-8-6">
        <h2 id="enzyme---beispiele">Enzyme - Beispiele</h2>
<pre><code class="language-jsx"><span class="hljs-keyword">import</span> { shallow, mount } <span class="hljs-keyword">from</span> <span class="hljs-string">'enzyme'</span>;

it(<span class="hljs-string">'renders a component without crashing'</span>, () =&gt; {
  <span class="hljs-keyword">const</span> wrapper = shallow(<span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">MyComponent</span> /&gt;</span>);
});

it('renders a component tree without crashing', () =&gt; {
  const wrapper = mount(<span class="hljs-tag">&lt;<span class="hljs-name">MyComponent</span> /&gt;</span>);
});</span></code></pre>

      </section><section class="slide" id="slide-8-7">
        <h2 id="enzyme---cheatsheet">Enzyme - Cheatsheet</h2>
<p><a href="https://devhints.io/enzyme">https://devhints.io/enzyme</a></p>

      </section></section><section class="section" id="section-9"><section class="slide" id="slide-9-1">
        <h1 id="beispiel-testen-mit-jest-und-enzyme">Beispiel: Testen mit Jest und Enzyme</h1>
<p>Testen einer Rating-Komponente</p>

      </section><section class="slide" id="slide-9-2">
        <h2 id="beispiel-testen-einer-rating-komponente">Beispiel: Testen einer Rating-Komponente</h2>
<pre><code class="language-tsx"><span class="hljs-keyword">import</span> React <span class="hljs-keyword">from</span> <span class="hljs-string">'react'</span>;
<span class="hljs-keyword">import</span> { shallow, mount } <span class="hljs-keyword">from</span> <span class="hljs-string">'enzyme'</span>;

<span class="hljs-keyword">import</span> Rating <span class="hljs-keyword">from</span> <span class="hljs-string">'./Rating'</span>;</code></pre>

      </section><section class="slide" id="slide-9-3">
        <h2 id="beispiel-testen-einer-rating-komponente">Beispiel: Testen einer Rating-Komponente</h2>
<pre><code class="language-tsx">describe(<span class="hljs-string">'rendering'</span>, <span class="hljs-function"><span class="hljs-params">()</span> =&gt;</span> {
  it(<span class="hljs-string">'renders 5 Star components'</span>, <span class="hljs-function"><span class="hljs-params">()</span> =&gt;</span> {
    <span class="hljs-keyword">const</span> wrapper = shallow(&lt;Rating stars={<span class="hljs-number">5</span>} /&gt;);
    expect(wrapper.find(<span class="hljs-string">'Star'</span>)).toHaveLength(<span class="hljs-number">5</span>);
  });

  it(<span class="hljs-string">'renders 5 stars'</span>, <span class="hljs-function"><span class="hljs-params">()</span> =&gt;</span> {
    <span class="hljs-keyword">const</span> wrapper = mount(&lt;Rating stars={<span class="hljs-number">5</span>} /&gt;);
    expect(wrapper.find(<span class="hljs-string">'.star'</span>)).toHaveLength(<span class="hljs-number">5</span>);
  });
});</code></pre>

      </section><section class="slide" id="slide-9-4">
        <h2 id="beispiel-testen-einer-rating-komponente">Beispiel: Testen einer Rating-Komponente</h2>
<pre><code class="language-tsx">describe(<span class="hljs-string">'rendering'</span>, <span class="hljs-function"><span class="hljs-params">()</span> =&gt;</span> {
  it(<span class="hljs-string">'renders 3 active stars'</span>, <span class="hljs-function"><span class="hljs-params">()</span> =&gt;</span> {
    <span class="hljs-keyword">const</span> wrapper = mount(&lt;Rating stars={<span class="hljs-number">3</span>} /&gt;);
    expect(wrapper.find(<span class="hljs-string">'.star'</span>)).toHaveLength(<span class="hljs-number">5</span>);
    expect(
      wrapper.find(<span class="hljs-string">'.star'</span>).get(<span class="hljs-number">2</span>).props.className
    ).toEqual(<span class="hljs-string">'star active'</span>);
    expect(
      wrapper.find(<span class="hljs-string">'.star'</span>).get(<span class="hljs-number">3</span>).props.className
    ).toEqual(<span class="hljs-string">'star'</span>);
  });
});</code></pre>

      </section><section class="slide" id="slide-9-5">
        <h2 id="beispiel-testen-einer-rating-komponente">Beispiel: Testen einer Rating-Komponente</h2>
<pre><code class="language-tsx">describe(<span class="hljs-string">'events'</span>, <span class="hljs-function"><span class="hljs-params">()</span> =&gt;</span> {
  it(<span class="hljs-string">'reacts to click on first star'</span>, <span class="hljs-function"><span class="hljs-params">()</span> =&gt;</span> {
    <span class="hljs-keyword">const</span> mockFn = jest.fn();
    <span class="hljs-keyword">const</span> wrapper = mount(
      &lt;Rating stars={<span class="hljs-number">3</span>} onStarsChange={mockFn} /&gt;
    );
    wrapper
      .find(<span class="hljs-string">'span'</span>)
      .at(<span class="hljs-number">0</span>)
      .simulate(<span class="hljs-string">'click'</span>);
    expect(mockFn.mock.calls[<span class="hljs-number">0</span>][<span class="hljs-number">0</span>]).toEqual(<span class="hljs-number">1</span>);
  });
});</code></pre>

      </section><section class="slide" id="slide-9-6">
        <h2 id="beispiel-testen-einer-rating-komponente">Beispiel: Testen einer Rating-Komponente</h2>
<p>Testen einer (hypothetischen) Rating-Komponente, die ihren eigenen internen State hat:</p>
<pre><code class="language-tsx">describe(<span class="hljs-string">'events'</span>, <span class="hljs-function"><span class="hljs-params">()</span> =&gt;</span> {
  it(<span class="hljs-string">'reacts to click on first star'</span>, <span class="hljs-function"><span class="hljs-params">()</span> =&gt;</span> {
    <span class="hljs-keyword">const</span> wrapper = mount(&lt;Rating /&gt;);
    wrapper
      .find(<span class="hljs-string">'span'</span>)
      .at(<span class="hljs-number">0</span>)
      .simulate(<span class="hljs-string">'click'</span>);
    expect(wrapper.instance.state.count).toEqual(<span class="hljs-number">1</span>);
  });
});</code></pre>

      </section><section class="slide" id="slide-9-7">
        <h2 id="beispiel-testen-einer-rating-komponente">Beispiel: Testen einer Rating-Komponente</h2>
<pre><code class="language-tsx">describe(<span class="hljs-string">'errors'</span>, <span class="hljs-function"><span class="hljs-params">()</span> =&gt;</span> {
  it(<span class="hljs-string">'throws an error if the number of stars is 0'</span>, <span class="hljs-function"><span class="hljs-params">()</span> =&gt;</span> {
    <span class="hljs-keyword">const</span> testFn = <span class="hljs-function"><span class="hljs-params">()</span> =&gt;</span> {
      <span class="hljs-keyword">const</span> wrapper = shallow(&lt;Rating stars={<span class="hljs-number">0</span>} /&gt;);
    };
    expect(testFn).toThrow(
      <span class="hljs-string">'number of stars must be positive'</span>
    );
  });
});</code></pre>

      </section></section><section class="section" id="section-10"><section class="slide" id="slide-10-1">
        <h1 id="beispiel-testen-mit-jest-und-react-test-renderer">Beispiel: Testen mit Jest und React Test Renderer</h1>
<p>Testen einer Rating Komponente</p>

      </section><section class="slide" id="slide-10-2">
        <h2 id="test-setup">Test-Setup</h2>
<pre><code class="language-tsx"><span class="hljs-keyword">import</span> React <span class="hljs-keyword">from</span> <span class="hljs-string">'react'</span>;
<span class="hljs-keyword">import</span> TestRenderer <span class="hljs-keyword">from</span> <span class="hljs-string">'react-test-renderer'</span>;

<span class="hljs-keyword">import</span> Rating <span class="hljs-keyword">from</span> <span class="hljs-string">'./Rating'</span>;</code></pre>

      </section><section class="slide" id="slide-10-3">
        <h2 id="testen-des-renderings">Testen des Renderings</h2>
<pre><code class="language-tsx">describe(<span class="hljs-string">'rendering'</span>, <span class="hljs-function"><span class="hljs-params">()</span> =&gt;</span> {
  it(<span class="hljs-string">'renders 5 divs'</span>, <span class="hljs-function"><span class="hljs-params">()</span> =&gt;</span> {
    <span class="hljs-keyword">const</span> instance = TestRenderer.create(
      &lt;Rating stars={<span class="hljs-number">3</span>} /&gt;
    ).root;
    expect(instance.findAllByType(<span class="hljs-string">'span'</span>)).toHaveLength(<span class="hljs-number">5</span>);
  });

  it(<span class="hljs-string">'renders 3 active stars'</span>, <span class="hljs-function"><span class="hljs-params">()</span> =&gt;</span> {
    <span class="hljs-keyword">const</span> instance = TestRenderer.create(
      &lt;Rating stars={<span class="hljs-number">3</span>} /&gt;
    ).root;
    expect(
      instance.findAllByProps({ className: <span class="hljs-string">'star active'</span> })
    ).toHaveLength(<span class="hljs-number">3</span>);
  });
});</code></pre>

      </section><section class="slide" id="slide-10-4">
        <h2 id="testen-von-events">Testen von Events</h2>
<pre><code class="language-jsx">describe(<span class="hljs-string">'events'</span>, () =&gt; {
  it(<span class="hljs-string">'reacts to click on the first star'</span>, () =&gt; {
    <span class="hljs-keyword">const</span> mockFn = jest.fn();
    <span class="hljs-keyword">const</span> instance = TestRenderer.create(
      <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">Rating</span> <span class="hljs-attr">stars</span>=<span class="hljs-string">{3}</span> <span class="hljs-attr">onStarsChange</span>=<span class="hljs-string">{mockFn}</span> /&gt;</span>
    ).root;
    const fourthStar = instance.findAllByType('span')[3];
    fourthStar.props.onClick();
    expect(mockFn).toBeCalledWith(4);
  });
});</span></code></pre>

      </section><section class="slide" id="slide-10-5">
        <h2 id="testen-von-fehlern">Testen von Fehlern</h2>
<pre><code class="language-jsx">describe(<span class="hljs-string">'errors'</span>, () =&gt; {
  it(<span class="hljs-string">'throws an error if the number of stars is 0'</span>, () =&gt; {
    <span class="hljs-keyword">const</span> testFn = <span class="hljs-function"><span class="hljs-params">()</span> =&gt;</span> {
      TestRenderer.create(<span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">Rating</span> <span class="hljs-attr">stars</span>=<span class="hljs-string">{0}</span> /&gt;</span>);
    };
    expect(testFn).toThrow(
      'number of stars must be positive'
    );
  });
});</span></code></pre>

      </section></section><section class="section" id="section-11"><section class="slide" id="slide-11-1">
        <h1 id="snapshot-tests">Snapshot Tests</h1>

      </section><section class="slide" id="slide-11-2">
        <h2 id="snapshot-tests">Snapshot Tests</h2>
<p>Komponenten werden gerendert und mit früheren Versionen (Snapshots) verglichen</p>
<p>Snapshot Tests fallen unter Regressionstests.</p>

      </section><section class="slide" id="slide-11-3">
        <h2 id="snapshot-tests---setup">Snapshot Tests - Setup</h2>
<pre><code class="language-bash">npm install --save-dev react-test-renderer</code></pre>
<p>für TypeScript:</p>
<pre><code class="language-bash">npm install --save-dev @types/react-test-renderer</code></pre>

      </section><section class="slide" id="slide-11-4">
        <h2 id="snapshot-tests-in-react---tests-erstellen">Snapshot Tests in React - Tests erstellen</h2>
<pre><code class="language-jsx"><span class="hljs-comment">// Rating.test.js</span>
<span class="hljs-keyword">import</span> React <span class="hljs-keyword">from</span> <span class="hljs-string">'react'</span>;
<span class="hljs-keyword">import</span> Rating <span class="hljs-keyword">from</span> <span class="hljs-string">'./Rating.js'</span>;
<span class="hljs-keyword">import</span> renderer <span class="hljs-keyword">from</span> <span class="hljs-string">'react-test-renderer'</span>;

it(<span class="hljs-string">'renders correctly'</span>, () =&gt; {
  <span class="hljs-keyword">const</span> tree = renderer
    .create(<span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">Rating</span> <span class="hljs-attr">stars</span>=<span class="hljs-string">{2}</span> /&gt;</span>)
    .toJSON();
  expect(tree).toMatchSnapshot();
});</span></code></pre>

      </section><section class="slide" id="slide-11-5">
        <h2 id="snapshot-tests-aktualisieren">Snapshot Tests aktualisieren</h2>
<p>Haben wir das Verhalten einer Komponente geändert und danach ihr Verhalten überprüft, können wir Snapshot-Tests entsprechend aktualisieren:</p>
<pre><code class="language-txt">2 snapshot tests failed in 1 test suite.
Inspect your code changes or press `u` to update them.</code></pre>

      </section></section><section class="section" id="section-12"><section class="slide" id="slide-12-1">
        <h1 id="storybook">Storybook</h1>

      </section><section class="slide" id="slide-12-2">
        <h2 id="storybook">Storybook</h2>
<p>Ermöglicht das Erstellen isolierter Komponentendemos</p>
<p>Beispiel:</p>
<p><a href="https://airbnb.io/react-dates/">https://airbnb.io/react-dates/</a></p>

      </section><section class="slide" id="slide-12-3">
        <h2 id="storybook---setup">Storybook - Setup</h2>
<pre><code class="language-bash">npx -p @storybook/cli sb init --<span class="hljs-built_in">type</span> react</code></pre>
<p>Erstellt einen Konfigurationsordner unter <code>.storybook</code> und Beispielstories unter <code>stories</code>.</p>

      </section><section class="slide" id="slide-12-4">
        <h2 id="storybook">Storybook</h2>
<pre><code class="language-bash">npm run storybook</code></pre>

      </section><section class="slide" id="slide-12-5">
        <h2 id="storybook">Storybook</h2>
<p>Konfiguration via <code>.storybook/config.js</code></p>

      </section></section><section class="section" id="section-13"><section class="slide" id="slide-13-1">
        <h1 id="react-router">React Router</h1>

      </section><section class="slide" id="slide-13-2">
        <h2 id="react-router">React Router</h2>
<p><a href="https://reacttraining.com/react-router/">https://reacttraining.com/react-router/</a></p>

      </section><section class="slide" id="slide-13-3">
        <h2 id="react-router---setup">React Router - Setup</h2>
<pre><code class="language-bash">npm install react-router-dom</code></pre>
<pre><code class="language-bash">// TypeScript:
npm install react-router-dom @types/react-router-dom</code></pre>

      </section><section class="slide" id="slide-13-4">
        <h2 id="react-router---browserrouter">React Router - BrowserRouter</h2>
<p>Um React Router verwenden zu können:<br>Ganze Anwendung von einem <code>BrowserRouter</code> - Tag umschlossen</p>
<pre><code class="language-js"><span class="hljs-keyword">import</span> { BrowserRouter } <span class="hljs-keyword">from</span> <span class="hljs-string">'react-router-dom'</span>;
[...]

&lt;BrowserRouter&gt;
  <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">App</span>/&gt;</span></span>
&lt;<span class="hljs-regexp">/BrowserRouter&gt;</span></code></pre>

      </section><section class="slide" id="slide-13-5">
        <h2 id="react-router---routen-definieren">React Router - Routen definieren</h2>
<pre><code class="language-js"><span class="hljs-keyword">import</span> { Route } <span class="hljs-keyword">from</span> <span class="hljs-string">'react-router-dom'</span>;

&lt;Route path="/" exact component={TodoList} /&gt;
&lt;Route path="/about" exact component={About} /&gt;
&lt;Route path="/add" exact component={AddTodo} /&gt;</code></pre>

      </section><section class="slide" id="slide-13-6">
        <h2 id="react-router---routen-definieren">React Router - Routen definieren</h2>
<p>Wenn props übergeben werden müssen:</p>
<pre><code class="language-jsx"><span class="hljs-keyword">import</span> { Route } <span class="hljs-keyword">from</span> <span class="hljs-string">'react-router-dom'</span>;

&lt;Route
  path="/add"
  exact
  render={props =&gt; (
    &lt;AddTodo onSubmit={this.handleAddTodo} /&gt;
  )}
/&gt;;</code></pre>

      </section><section class="slide" id="slide-13-7">
        <h2 id="react-router---router-links">React Router - Router-Links</h2>
<pre><code class="language-jsx"><span class="hljs-keyword">import</span> { NavLink } <span class="hljs-keyword">from</span> <span class="hljs-string">'react-router-dom'</span>;

<span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">NavLink</span> <span class="hljs-attr">to</span>=<span class="hljs-string">"/"</span> <span class="hljs-attr">activeClassName</span>=<span class="hljs-string">"active-link"</span>&gt;</span>Home<span class="hljs-tag">&lt;/<span class="hljs-name">NavLink</span>&gt;</span></span>
&lt;NavLink to=<span class="hljs-string">"/add"</span> activeClassName=<span class="hljs-string">"active-link"</span>&gt;Add&lt;<span class="hljs-regexp">/NavLink&gt;</span></code></pre>

      </section><section class="slide" id="slide-13-8">
        <h2 id="react-router---switch">React Router - Switch</h2>
<p>Nur die erste zutreffende Route wird angezeigt</p>
<pre><code class="language-jsx"><span class="hljs-keyword">import</span> { Switch } <span class="hljs-keyword">from</span> <span class="hljs-string">'react-router-dom'</span>;

&lt;Switch&gt;
  &lt;Route path="/todos/:todoId" component={Todo} /&gt;
  &lt;Route path="/" component={NotFound} /&gt;
&lt;/Switch&gt;;</code></pre>

      </section><section class="slide" id="slide-13-9">
        <h2 id="react-router---redirects">React Router - Redirects</h2>
<pre><code class="language-jsx"><span class="hljs-keyword">import</span> { Redirect } <span class="hljs-keyword">from</span> <span class="hljs-string">'react-router'</span>;

&lt;Route
  path="/home"
  render={props =&gt; &lt;Redirect to="/" /&gt;}
/&gt;;</code></pre>

      </section><section class="slide" id="slide-13-10">
        <h2 id="react-router---routenparameter">React Router - Routenparameter</h2>
<pre><code class="language-jsx">&lt;Route
  path=<span class="hljs-string">"/todos/:todoId"</span>
  render={props =&gt; (
    <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span>Current todo: {props.match.params.todoId}<span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span>
  )}
/&gt;</code></pre>
<p>Routenparameter sind unter <em>props.match.params</em> abzurufen</p>

      </section></section><section class="section" id="section-14"><section class="slide" id="slide-14-1">
        <h1 id="pwas">PWAs</h1>
<p>Progressive Web Apps mit React</p>

      </section><section class="slide" id="slide-14-2">
        <h2 id="pwas">PWAs</h2>
<p><strong>Progressive Web Apps</strong>: Möglichkeit, Anwendungen für Mobilgeräte und PCs mit HTML, CSS und JavaScript zu schreiben</p>
<p>Mit <code>create-react-app</code> erstellte Anwendungen bieten dafür schon die Grundvoraussetzungen:</p>
<ul>
<li>Konfiguration in <code>public/manifest.json</code></li>
<li>PWA-Boilerplate in <code>src/serviceWorker.js</code></li>
</ul>

      </section><section class="slide" id="slide-14-3">
        <h2 id="pwas-aktivierung">PWAs: Aktivierung</h2>
<p>in <code>index.js</code> / <code>index.tsx</code>:</p>
<pre><code class="language-js">serviceWorker.register();</code></pre>

      </section><section class="slide" id="slide-14-4">
        <h2 id="pwas-konfiguration">PWAs: Konfiguration</h2>
<p>Via <code>public/manifest.json</code>:</p>
<p>name, short_name</p>

      </section><section class="slide" id="slide-14-5">
        <h2 id="pwas-logos-konfigurieren">PWAs: Logos konfigurieren</h2>
<p>Hinzufügen von Logos in den Formaten <code>144x144px</code>, <code>192x192px</code> und <code>512x512px</code> (in manifest.json)</p>

      </section><section class="slide" id="slide-14-6">
        <h2 id="pwa-add-to-homescreen">PWA: add to homescreen</h2>
<p><a href="https://developers.google.com/web/fundamentals/app-install-banners/">https://developers.google.com/web/fundamentals/app-install-banners/</a></p>

      </section><section class="slide" id="slide-14-7">
        <h2 id="pwa-add-to-homescreen">PWA: add to homescreen</h2>
<pre><code class="language-js"><span class="hljs-keyword">let</span> deferredPrompt;

componentDidMount() {
  <span class="hljs-built_in">window</span>.addEventListener(<span class="hljs-string">'beforeinstallprompt'</span>, e =&gt; {
    e.preventDefault();
    deferredPrompt = e;
    <span class="hljs-keyword">this</span>.setState({ <span class="hljs-attr">showInstallBtn</span>: <span class="hljs-literal">true</span> });
  });
}</code></pre>

      </section><section class="slide" id="slide-14-8">
        <h2 id="pwa-add-to-homescreen">PWA: add to homescreen</h2>
<pre><code class="language-js">handleInstallBtnClicked = <span class="hljs-function"><span class="hljs-params">()</span> =&gt;</span> {
  deferredPrompt.prompt();
  deferredPrompt.userChoice.then(<span class="hljs-function"><span class="hljs-params">choiceResult</span> =&gt;</span> {
    <span class="hljs-keyword">if</span> (choiceResult.outcome === <span class="hljs-string">'accepted'</span>) {
      <span class="hljs-built_in">console</span>.log(<span class="hljs-string">'user accepted'</span>);
    } <span class="hljs-keyword">else</span> {
      <span class="hljs-built_in">console</span>.log(<span class="hljs-string">'user dismissed'</span>);
    }
    deferredPrompt = <span class="hljs-literal">null</span>;
    <span class="hljs-keyword">this</span>.setState({ <span class="hljs-attr">showInstallBtn</span>: <span class="hljs-literal">false</span> });
  });
};</code></pre>

      </section><section class="slide" id="slide-14-9">
        <h2 id="pwa-deployment-auf-netlify">PWA: Deployment auf netlify</h2>
<ul>
<li><code>npm run build</code></li>
<li>dist-Ornder via drag&amp;drop auf app.netlify.com/drop</li>
<li>Manuell auf HTTPS wechseln - in Chrome am Desktop und Mobilgerät ausprobieren</li>
</ul>

      </section></section><section class="section" id="section-15"><section class="slide" id="slide-15-1">
        <h1 id="react-native">React Native</h1>

      </section><section class="slide" id="slide-15-2">
        <h2 id="react-native">React Native</h2>
<p>Mit React Native können React Anwendungen für iOS- und Android-Geräte erstellt werden</p>

      </section><section class="slide" id="slide-15-3">
        <h2 id="online-editor">Online Editor</h2>
<p>Siehe <a href="https://snack.expo.io/">https://snack.expo.io/</a></p>

      </section><section class="slide" id="slide-15-4">
        <h2 id="react-native-komponenten">React Native Komponenten</h2>
<ul>
<li>View (=div)</li>
<li>Text (=span)</li>
<li>Image</li>
<li>Button</li>
<li>TextInput (=input)</li>
<li>ScrollView</li>
</ul>
<p><a href="https://facebook.github.io/react-native/docs/components-and-apis#basic-components">ausführlichere Liste</a></p>

      </section></section><section class="section" id="section-16"><section class="slide" id="slide-16-1">
        <h1 id="context">Context</h1>

      </section><section class="slide" id="slide-16-2">
        <h2 id="context">Context</h2>
<p>Möglichkeit, Werte aus einer Komponente direkt allen weiter unten im Dokumentenbaum liegenden Komponenten zur Verfügung zu stellen - ohne den state über jede Ebene übergeben zu müssen</p>

      </section><section class="slide" id="slide-16-3">
        <h2 id="context">Context</h2>
<p>zwei Elemente:</p>
<ul>
<li><code>Provider</code>: stellt Werte zur Verfügung</li>
<li><code>Consumer</code>: verwendet diese Werte (kann weit unten in der Komponentenhierarchie liegen)</li>
</ul>

      </section><section class="slide" id="slide-16-4">
        <h2 id="context">Context</h2>
<p>Das Interface von Context kann sowohl Daten (aus dem State) als auch Eventhandler übergeben.</p>

      </section><section class="slide" id="slide-16-5">
        <h2 id="context---beispiel">Context - Beispiel</h2>
<pre><code class="language-js"><span class="hljs-comment">// TodosContext.js</span>

<span class="hljs-keyword">const</span> TodosContext = React.createContext();</code></pre>

      </section><section class="slide" id="slide-16-6">
        <h2 id="context---beispiel-typescript">Context - Beispiel: TypeScript</h2>
<pre><code class="language-ts"><span class="hljs-comment">// TodosContext.ts</span>

<span class="hljs-keyword">type</span> TodosContextType = {
  todos: <span class="hljs-built_in">Array</span>&lt;Todo&gt;;
  onToggle: <span class="hljs-function">(<span class="hljs-params">id: <span class="hljs-built_in">number</span></span>) =&gt;</span> <span class="hljs-built_in">void</span>;
  onClear: <span class="hljs-function"><span class="hljs-params">()</span> =&gt;</span> <span class="hljs-built_in">void</span>;
};

<span class="hljs-keyword">const</span> TodosContext = React.createContext(
  {} <span class="hljs-keyword">as</span> TodosContextType
);</code></pre>

      </section><section class="slide" id="slide-16-7">
        <h2 id="context---beispiel-provider">Context - Beispiel: Provider</h2>
<pre><code class="language-jsx"><span class="hljs-keyword">const</span> App = <span class="hljs-function"><span class="hljs-params">()</span> =&gt;</span> {
  <span class="hljs-keyword">return</span> (
    <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">MyContext.Provider</span>
      <span class="hljs-attr">value</span>=<span class="hljs-string">{{</span>
        <span class="hljs-attr">todos:</span> <span class="hljs-attr">this.state.todos</span>,
        <span class="hljs-attr">onToggle:</span> <span class="hljs-attr">this.handleToggle</span>,
        <span class="hljs-attr">onClear:</span> <span class="hljs-attr">this.handleClear</span>,
      }}&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">TodoStats</span> /&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">MyContext.Provider</span>&gt;</span>
  );
};</span></code></pre>

      </section><section class="slide" id="slide-16-8">
        <h2 id="context---beispiel-consumer">Context - Beispiel: Consumer</h2>
<p>funktionale Komponente:</p>
<pre><code class="language-jsx"><span class="hljs-keyword">const</span> TodoStats = <span class="hljs-function"><span class="hljs-params">()</span> =&gt;</span> {
  <span class="hljs-keyword">const</span> context = useContext(TodosContext);
  <span class="hljs-keyword">return</span> <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span>There are {context.todos.length} todos<span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span>;
};</code></pre>

      </section><section class="slide" id="slide-16-9">
        <h2 id="context---beispiel-consumer">Context - Beispiel: Consumer</h2>
<p>Klassenkomponente</p>
<pre><code class="language-jsx"><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">TodoStats</span> <span class="hljs-keyword">extends</span> <span class="hljs-title">React</span>.<span class="hljs-title">Component</span> </span>{
  render() {
    <span class="hljs-keyword">return</span> (
      <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">TodosContext.Consumer</span>&gt;</span>
        {context =&gt; (
          <span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span>
            There are {context.todos.length} todos
          <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
        )}
      <span class="hljs-tag">&lt;/<span class="hljs-name">Todos.Consumer</span>&gt;</span>
    );
  }
}</span></code></pre>

      </section></section><section class="section" id="section-17"><section class="slide" id="slide-17-1">
        <h1 id="dateistruktur">Dateistruktur</h1>
<p><a href="https://reactjs.org/docs/faq-structure.html">https://reactjs.org/docs/faq-structure.html</a></p>
<p>Verbreitete Zugänge:</p>
<ul>
<li>Gruppieren nach Feature / Route</li>
<li>Gruppieren nach Typ (Komponente / Reducer / API interface)</li>
</ul>
<p>zu beachten:</p>
<ul>
<li>Zu viel Verschachtelung vermeiden</li>
<li>Zu Beginn nicht zu viel Gedanken daran verschwenden</li>
</ul>

      </section></section>

    </div>
    <div id="navigation-arrows">
      <svg version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" id="navigation-arrows-svg"
        xml:space="preserve" width="100%" height="100%" viewBox="-110 -110 220 220">
        <path class="arrow right" d="M70,-30L100,0L70,30" />
        <path class="arrow down" d="M-30,70L0,100L30,70" />
        <path class="arrow left" d="M-70,-30L-100,0L-70,30" />
        <path class="arrow up" d="M-30,-70L0,-100L30,-70" />
      </svg>
    </div>
  </div>
  <style>
    * {
      box-sizing: border-box;
    }

    body {
      width: 100vw;
      height: 100vh;
      margin: 0px;
      display: flex;
      justify-content: center;
      align-items: center;
      background-color: rgb(150, 150, 150);
      font-family: -apple-system, "Segoe UI", "Roboto", "Helvetica Neue", Arial, sans-serif;
      line-height: 1.5rem;
    }

    p, ul, pre {
      margin-top: 0;
    }

    ul {
      padding-left: 1.5rem;
    }

    h1, h2, h3 {
      margin-top: 0px;
      font-weight: 600;
    }

    h1 {
      margin-top: 5vh;
      text-align: center;
      font-size: 2rem;
    }

    h2 {
      margin-bottom: 1.5em;
    }

    svg {
      width: 100%;
      height: auto;
    }

    .section {
      height: 100%;
      display: none;
    }

    .section.active {
      display: block;
    }

    .slide {
      height: 100%;
      display: flex;
      flex-direction: column;
    }

    .slide.inactive {
      display: none;
    }

    #canvas {
      box-shadow: 0 0.5vh 1vh rgba(0, 0, 0, 0.3);
      background-color: #f8f8f8;
      position: relative;
      display: flex;
    }

    #canvas-content {
      width: 100%;
      height: 100%;
    }

    #canvas-content .note {
      display: none;
    }

    #canvas-content img {
      margin: 0px auto;
      display: block;
    }

    @media (min-aspect-ratio: 8/5) {

      html {
        font-size: 3.5vh;
      }

      /* wide screen */
      #canvas {
        width: calc(100vh / 5 * 8);
        height: 100vh;
        padding: 10vh;
        padding-top: 5vh;
      }
    }

    @media (max-aspect-ratio: 8/5) {

      html {
        font-size: calc(3.5vw * 5 / 8);
      }

      /* narrow screen */
      #canvas {
        width: 100vw;
        height: calc(100vw * 5 / 8);
        padding: calc(10vh * 5 / 8);
        padding-top: calc(5vh * 5 / 8);
      }
    }

    pre {
      background-color: rgb(224, 233, 240);
      box-shadow: 0 0.5vh 1vh rgba(0, 0, 0, 0.2);
      padding: 0.5em 1em;
      line-height: 1.2em;
      overflow: auto;
    }

    #navigation-arrows {
      position: absolute;
      right: 2rem;
      top: 2rem;
      height: 3rem;
      width: 3rem;
    }

    #navigation-arrows .arrow {
      stroke: lightblue;
      /*stroke-width: 0.8em; Chrome behaves differently with ems here */
      stroke-width: 16px;
      stroke-linecap: round;
      fill: none;
      cursor: pointer;
    }

    td,
    th {
      padding: 0.2em 0.8em;
    }

    th {
      text-align: start;
    }
  </style>
  <script>
    let presenterWindow;
    let activeSlide;
    let slideCount;

    const arrowUp = document.querySelector('.arrow.up');
    const arrowDown = document.querySelector('.arrow.down');
    const arrowRight = document.querySelector('.arrow.right');
    const arrowLeft = document.querySelector('.arrow.left');
    arrowUp.addEventListener('click',
      () => {activateSlideSafe(activeSlide[0], activeSlide[1] - 1);}
    );
    arrowDown.addEventListener('click',
      () => {activateSlideSafe(activeSlide[0], activeSlide[1] + 1);}
    );
    arrowLeft.addEventListener('click',
      () => {activateSlideSafe(activeSlide[0] - 1, 1);}
    );
    arrowRight.addEventListener('click',
      () => {activateSlideSafe(activeSlide[0] + 1, 1);}
    )
    const init = () => {
      slideCount = countSlides();
      activateSlideSafe(1, 1);
      addKeyControls();
      addSwipeControls();
    }

    // count slides
    const countSlides = () => {
      const counts = [];
      return [...document.querySelectorAll('.section')].map(section => section.childNodes.length);
    }

    const updateVisible = () => {
      for (let section of document.querySelectorAll('.section')) {
        if (section.id === `section-${activeSlide[0]}`) {
          section.className = 'section active';
        } else {
          section.className = 'section inactive';
        }
      }
      for (let slide of document.querySelectorAll('.slide')) {
        if (slide.id === `slide-${activeSlide[0]}-${activeSlide[1]}`) {
          slide.className = 'slide active';
        } else {
          slide.className = 'slide inactive';
        }
      }
    }

    const updatePageArrows = () => {
      if (slideCount.length === 1) {
        arrowLeft.style.opacity = "0";
        arrowRight.style.opacity = "0";
      } else {
        const progressSections = (activeSlide[0] - 1) / (slideCount.length - 1);
        arrowLeft.style.opacity = progressSections.toString();
        arrowRight.style.opacity = (1 - progressSections).toString();
      }
      const slidesInActiveSection = slideCount[activeSlide[0] - 1]
      if (slidesInActiveSection === 1) {
        arrowUp.style.opacity = "0";
        arrowDown.style.opacity = "0";
      } else {
        const progressSlides = (activeSlide[1] - 1) / (slidesInActiveSection - 1);
        arrowUp.style.opacity = progressSlides.toString();
        arrowDown.style.opacity = (1 - progressSlides).toString();
      }
    }

    /**
     * Activate a slide if it exists, else do nothing
    */
    const activateSlideSafe = (sectionIndex, slideIndex) => {
      if (1 <= sectionIndex && sectionIndex <= slideCount.length && 1 <= slideIndex && slideIndex <= slideCount[sectionIndex - 1]) {
        activeSlide = [sectionIndex, slideIndex];
        updateVisible();
        updatePageArrows();
        scrolltoActiveSlide();
      }
    }

    const activateSlideNextSafe = () => {
      if (activeSlide[1] === slideCount[activeSlide[0] - 1]) {
        activateSlideSafe(activeSlide[0] + 1, 1);
      } else {
        activateSlideSafe(activeSlide[0], activeSlide[1] + 1);
      }
    }

    const activateSlideRightSafe = () => {
      activateSlideSafe(activeSlide[0] + 1, 1);
    }

    const activateSlideLeftSafe = () => {
      activateSlideSafe(activeSlide[0] - 1, 1);
    }

    const activateSlideDownSafe = () => {
      activateSlideSafe(activeSlide[0], activeSlide[1] + 1);
    }

    const activateSlideUpSafe = () => {
      activateSlideSafe(activeSlide[0], activeSlide[1] - 1);
    }

    const scrolltoActiveSlide = () => {
      const slideId = `#slide-${activeSlide[0]}-${activeSlide[1]}`;
      if (presenterWindow) {
        const activeSlide = presenterWindow.document.querySelector(slideId);
        if (activeSlide) {
          activeSlide.scrollIntoView();
        }
      }
    }

    const addKeyControls = () => {
      document.querySelector('body').addEventListener('keydown', event => {
        if (event.key === 'p') {
          const canvasContent = document.querySelector('#canvas-content').innerHTML;
          presenterWindow = window.open(document.URL, '_blank');
          presenterWindow.onload = () => {
            presenterWindow.document.querySelector('body').innerHTML = canvasContent;
          }
        }
        if (event.key === 'ArrowRight') {
          activateSlideRightSafe();
        } else if (event.key === 'ArrowLeft') {
          activateSlideLeftSafe();
        } else if (event.key === 'ArrowDown') {
          activateSlideDownSafe();
        } else if (event.key === 'ArrowUp') {
          activateSlideUpSafe();
        } else if (event.key === 'Enter') {
          activateSlideNextSafe();
        }
      });
    }

    const addSwipeControls = () => {

      const distance = 100;

      let startPos;
      let handled;

      document.addEventListener('touchstart', event => {
        startPos = event.touches[0];
        handled = false;
      });

      document.addEventListener('touchmove', event => {
        if (!handled) {
          let currentPos = event.touches[0];
          const xDiff = currentPos.clientX - startPos.clientX;
          const yDiff = currentPos.clientY - startPos.clientY;
          if (Math.abs(xDiff) > 2*Math.abs(yDiff) ||
              Math.abs(yDiff) > 2*Math.abs(xDiff)) {
            if (xDiff > distance) {
              activateSlideLeftSafe();
              handled = true;
            } else if (xDiff < -distance) {
              activateSlideRightSafe();
              handled = true;
            } else if (yDiff > distance) {
              activateSlideUpSafe();
              handled = true;
            } else if (yDiff < -distance) {
              activateSlideDownSafe();
              handled = true;
            }
          }
        }
      });
    }

    init();

  </script>
</body>

</html>