<!DOCTYPE html>

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta http-equiv="X-UA-Compatible" content="ie=edge">
  <title>Datenbanken und Datenspeicherung</title>
  <style>/*

Original highlight.js style (c) Ivan Sagalaev <maniac@softwaremaniacs.org>

*/

.hljs {
  display: block;
  overflow-x: auto;
  padding: 0.5em;
  background: #F0F0F0;
}


/* Base color: saturation 0; */

.hljs,
.hljs-subst {
  color: #444;
}

.hljs-comment {
  color: #888888;
}

.hljs-keyword,
.hljs-attribute,
.hljs-selector-tag,
.hljs-meta-keyword,
.hljs-doctag,
.hljs-name {
  font-weight: bold;
}


/* User color: hue: 0 */

.hljs-type,
.hljs-string,
.hljs-number,
.hljs-selector-id,
.hljs-selector-class,
.hljs-quote,
.hljs-template-tag,
.hljs-deletion {
  color: #880000;
}

.hljs-title,
.hljs-section {
  color: #880000;
  font-weight: bold;
}

.hljs-regexp,
.hljs-symbol,
.hljs-variable,
.hljs-template-variable,
.hljs-link,
.hljs-selector-attr,
.hljs-selector-pseudo {
  color: #BC6060;
}


/* Language color: hue: 90; */

.hljs-literal {
  color: #78A960;
}

.hljs-built_in,
.hljs-bullet,
.hljs-code,
.hljs-addition {
  color: #397300;
}


/* Meta color: hue: 200 */

.hljs-meta {
  color: #1f7199;
}

.hljs-meta-string {
  color: #4d99bf;
}


/* Misc effects */

.hljs-emphasis {
  font-style: italic;
}

.hljs-strong {
  font-weight: bold;
}
</style>
</head>

<body>
  <div id="canvas">
    <div id="no-script">
      Could not execute modern JavaScript code. Please switch to a modern browser,
      e.g. the most recent version of Firefox, Chrome or Edge and enable JavaScript.
    </div>
    <div id="canvas-content">

      <section class="section" id="section-1"><section class="slide" id="slide-1-1">
        <h1 id="title">Datenbanken und Datenspeicherung</h1>

      </section><section class="slide" id="slide-1-2">
        <h2 id="präsentation-und-code">Präsentation und Code</h2>
<p>Präsentationen verfügbar unter: <a href="https://karuga.eu/courses-presentations">https://karuga.eu/courses-presentations</a></p>
<p>Code verfügbar unter: <a href="https://github.com/marko-knoebl/courses-code">https://github.com/marko-knoebl/courses-code</a></p>

      </section><section class="slide" id="slide-1-3">
        <h2 id="ihr-trainer">Ihr Trainer</h2>
<p>Marko Knöbl</p>
<ul>
<li>Frontend Web-Entwicklung<ul>
<li>JavaScript</li>
<li>React, Angular</li>
</ul>
</li>
<li>Programmierung<ul>
<li>Python, JavaScript</li>
</ul>
</li>
</ul>

      </section><section class="slide" id="slide-1-4">
        <h2 id="vorstellung-der-teilnehmer">Vorstellung der Teilnehmer</h2>
<ul>
<li>Name</li>
<li>Firma</li>
<li>Aktuelle Projekte</li>
<li>Grund der Schulung</li>
<li>Vorkenntnisse</li>
<li>Erwartungen / Wünsche</li>
</ul>

      </section><section class="slide" id="slide-1-5">
        <h2 id="organisatorisches">Organisatorisches</h2>
<ul>
<li>Kursdauer</li>
<li>Pausen</li>
<li>Mittagessen</li>
<li>Unterlagen</li>
<li>Fragen, Feedback? - Jederzeit erwünscht</li>
</ul>

      </section></section><section class="section" id="section-2"><section class="slide" id="slide-2-1">
        <h1 id="agenda">Agenda</h1>
<ul>
<li>Datenformate</li>
<li>Datenbanken</li>
<li>SQL-Abfragesprache</li>
</ul>

      </section></section><section class="section" id="section-3"><section class="slide" id="slide-3-1">
        <h1 id="datenformate">Datenformate</h1>

      </section><section class="slide" id="slide-3-2">
        <h2 id="datenformate">Datenformate</h2>
<p>Wichtige Formate zum Speichern bzw zum Austausch von Daten:</p>
<ul>
<li>CSV (Comma-separated values, Textbasierte tabellarische Dokumente)</li>
<li>JSON (JavaScript Object Notation)</li>
<li>XML (Extensible Markup Language, ähnlich zu HTML)</li>
<li>SQL Datenbanken</li>
<li>andere Datenbanken</li>
</ul>

      </section></section><section class="section" id="section-4"><section class="slide" id="slide-4-1">
        <h1 id="datentypen">Datentypen</h1>

      </section><section class="slide" id="slide-4-2">
        <h2 id="datentypen">Datentypen</h2>
<p>Datentypen und Datenstrukturen, mit denen in der Informatik oft gearbeitet wird:</p>
<ul>
<li>Zahlen (Kommazahlen und Ganzzahlen)</li>
<li>Ja/Nein - Werte</li>
<li>Text</li>
<li>Binärdaten (Folgen von 0 und 1, die beliebige Informationen repräsentieren können - z.B. ein Bild, ein Video, Text, ...)</li>
<li>Zeit- / Datumsangaben</li>
<li>Aufreihungen anderer Daten (z.B. eine Reihe von Zahlen)</li>
<li>Assoziative Arrays (Sammlungen benannter Einträge)</li>
<li>fehlende Daten - oft mit <em>null</em> repräsentiert</li>
</ul>

      </section><section class="slide" id="slide-4-3">
        <h2 id="beispiele-für-online-datenquellen">Beispiele für Online-Datenquellen</h2>
<ul>
<li>OpenWeatherMap: <a href="https://samples.openweathermap.org/data/2.5/weather?q=Berlin&amp;appid=b6907d289e10d714a6e88b30761fae22">Beispieldaten (nicht live)</a></li>
<li>DataHub: <a href="https://datahub.io/core">Core Data</a></li>
</ul>

      </section></section><section class="section" id="section-5"><section class="slide" id="slide-5-1">
        <h1 id="zahlen">Zahlen</h1>

      </section><section class="slide" id="slide-5-2">
        <h2 id="zahlen">Zahlen</h2>
<p>wichtige Arten von Zahlen in der Informatik:</p>
<ul>
<li><em>integer</em> (Ganzzahlen)</li>
<li><em>floating-point number</em> oder <em>float</em> (Kommazahlen im Binärsystem)</li>
<li><em>decimal</em> (Kommazahlen im Dezimalsystem)</li>
</ul>

      </section><section class="slide" id="slide-5-3">
        <h2 id="zahlen">Zahlen</h2>
<p>In Programmiersprachen werden hauptsächlich <em>integer</em> und <em>floats</em> verwendet</p>
<p>In Datenbanken oder CSV-Dateien kommt auch der Typ <em>decimal</em> vor</p>

      </section><section class="slide" id="slide-5-4">
        <h2 id="zahlen">Zahlen</h2>
<p>Achtung Rundungsfehler: Einige Zahlen können nicht genau als Kommazahlen repräsentiert werden, sie werden immer gerundet</p>
<p>z.B.: <code>1/3</code></p>
<p>Im Binärsystem können auch Zahlen wie <code>0.1</code> oder <code>0.2</code> nicht genau repräsentiert werden - hier gibt es ganz kleine Abweichungen</p>
<p>Beispiel: <code>0.3 - 0.2</code> ergibt in Programmiersprachen nicht exakt <code>0.1</code>, sondern meist <code>0.09999999999999998</code></p>

      </section><section class="slide" id="slide-5-5">
        <h2 id="zahlen">Zahlen</h2>
<p>Typen wie <em>integer</em> oder <em>float</em> haben üblicherweise eine vorgegebene Genauigkeit</p>
<p>Beispiele:</p>
<ul>
<li>ein <em>integer</em> in <em>SQL</em> kann typischerweise die Werte <em>-2,147,483,648</em> bis <em>2,147,483,647</em> annehmen</li>
<li>eine Kommazahl im Binärsystem hat oft eine Genauigkeit von etwa 15 Dezimalstellen (<em>64-Bit</em> Genauigkeit)</li>
</ul>

      </section><section class="slide" id="slide-5-6">
        <h2 id="zahlen">Zahlen</h2>
<p>Speicherung als Zahl oder als Text?</p>
<p>Wie speichert man Kreditkartennummern, Postleitzahlen, Telefonnummern, ...?</p>

      </section><section class="slide" id="slide-5-7">
        <h2 id="zahlen">Zahlen</h2>
<p>Kreditkartennummern, Postleitzahlen, Telefonnummern, etc sollten als Text gespeichert werden</p>
<p>Gründe:</p>
<ul>
<li>solche Daten können mit Nullen beginnen, die bei einer Zahl nicht erfasst würden</li>
<li>solche Daten können Sonderzeichen (z.B. <code>/</code>, Leerzeichen, ...) enthalten</li>
</ul>
<p>Grundregel: wenn mit einer Zahl nicht sinnvoll gerechet werden kann, sollte sie als String gespeichert werden.</p>

      </section></section><section class="section" id="section-6"><section class="slide" id="slide-6-1">
        <h1 id="boolesche-werte">Boolesche Werte</h1>

      </section><section class="slide" id="slide-6-2">
        <h2 id="boolesche-werte">Boolesche Werte</h2>
<p>Boolescher Wert = Ja/Nein bzw wahr/falsch - Wert</p>
<p>Haben entweder einen eigenen Datentyp oder werden durch die Werte <code>1</code> und <code>0</code> repräsentiert</p>
<p>Werden üblicherweise durch die Ausdrücke <code>true</code> und <code>false</code> (oder <code>True</code> und <code>False</code>) bezeichnet</p>

      </section></section><section class="section" id="section-7"><section class="slide" id="slide-7-1">
        <h1 id="strings">Strings</h1>

      </section><section class="slide" id="slide-7-2">
        <h2 id="strings">Strings</h2>
<p>Ein <em>String</em> - auch <em>Zeichenkette</em> genannt - repräsentiert Text</p>
<p>Heutzutage können in Strings <em>meist</em> alle Unicode-Zeichen verwendet werden; in manchen Fällen ist die Zeichenauswahl allerdings eingeschränkt - z.B. auf <em>ASCII</em></p>

      </section><section class="slide" id="slide-7-3">
        <h2 id="strings">Strings</h2>
<p>Strings werden üblicherweise mit einfachen oder doppelten Anführungszeichen begrenzt</p>
<p>Gültiger String in Python, JavaScript, JSON:</p>
<pre><code class="language-txt">&quot;Hello, world!&quot;</code></pre>
<p>Gültiger String in Python, JavaScript, SQL:</p>
<pre><code class="language-txt">&#39;Hello, world!&#39;</code></pre>

      </section><section class="slide" id="slide-7-4">
        <h2 id="strings---escape-sequenzen">Strings - Escape-Sequenzen</h2>
<p>Problem: Wie schreiben wir Zeichen wie z.B. <code>&quot;</code> innerhalb eines Strings?</p>
<p>Ungültig:</p>
<pre><code class="language-py"><span class="hljs-string">"He said: "</span>hi!<span class="hljs-string">""</span></code></pre>

      </section><section class="slide" id="slide-7-5">
        <h2 id="strings---escape-sequenzen">Strings - Escape-Sequenzen</h2>
<p>Lösungen in Python, JavaScript, JSON:</p>
<pre><code class="language-JSON"><span class="hljs-string">"He said: \"hi!\""</span></code></pre>
<p>Die Zeichenfolge <code>\&quot;</code> wird wie ein einzelnes Anführungszeichen interpretiert</p>
<p>Lösung in CSV (und ähnlich in SQL):</p>
<pre><code>&quot;He said: &quot;&quot;hi!&quot;&quot;&quot;</code></pre><p>Die Zeichenfolge <code>&quot;&quot;</code> wird wie ein einzelnes gewöhnliches Anführungszeichen interpretiert</p>

      </section><section class="slide" id="slide-7-6">
        <h2 id="strings---escape-sequenzen">Strings - Escape-Sequenzen</h2>
<p>Weitere Escape-Sequenzen in Programmiersprachen:</p>
<p>Zeilenumbruch in 1 Zeile (Linux, Mac):</p>
<pre><code class="language-json"><span class="hljs-string">"line 1\nline 2"</span></code></pre>
<p>Zeilenumbruch in 1 Zeile (Windows):</p>
<pre><code class="language-json"><span class="hljs-string">"line 1\r\nline 2"</span></code></pre>
<p>Einzelner Backslash:</p>
<pre><code class="language-json"><span class="hljs-string">"C:\\programs\\firefox"</span></code></pre>

      </section></section><section class="section" id="section-8"><section class="slide" id="slide-8-1">
        <h1 id="null">null</h1>

      </section><section class="slide" id="slide-8-2">
        <h2 id="null">null</h2>
<p>Mit <code>null</code> wird ausgedrückt, dass ein bestimmter Wert fehlt oder unbekannt ist</p>

      </section></section><section class="section" id="section-9"><section class="slide" id="slide-9-1">
        <h1 id="csv">CSV</h1>

      </section><section class="slide" id="slide-9-2">
        <h2 id="csv">CSV</h2>
<p>CSV (<em>comma-separated values</em>) ist ein Dateiformat, das tabellarische Daten beinhalten kann</p>

      </section><section class="slide" id="slide-9-3">
        <h2 id="beispiel">Beispiel</h2>
<pre><code class="language-csv">ISO,Country,Capital,Languages
AD,Andorra,Andorra la Vella,&quot;ES,FR&quot;
AE,United Arab Emirates,Abu Dhabi,&quot;AE,fa,en,hi,ur&quot;
AF,Afghanistan,Kabul,&quot;AF,tk&quot;</code></pre>

      </section><section class="slide" id="slide-9-4">
        <h2 id="standardisierung">Standardisierung</h2>
<p>Es gibt keinen definitiven Standard</p>
<p>Varianten des CSV Formats können sich durch die folgenden Aspekte unterscheiden:</p>
<ul>
<li>Trennzeichen: kann z.B. ein Komma, Semikolon oder Tab sein</li>
<li>Vorhandensein einer Tabellenkopfzeile</li>
<li>Regeln zum Setzen und <em>Escapen</em> von Anführungszeichen</li>
</ul>

      </section><section class="slide" id="slide-9-5">
        <h2 id="standardisierung">Standardisierung</h2>
<p>Das Format ist älter als die Standards - in der Praxis gibt es viele Variationen</p>
<ul>
<li>RFC 4180: <a href="https://tools.ietf.org/html/rfc4180">https://tools.ietf.org/html/rfc4180</a></li>
<li>W3C: <a href="https://www.w3.org/TR/2015/REC-tabular-data-model-20151217/">https://www.w3.org/TR/2015/REC-tabular-data-model-20151217/</a></li>
</ul>

      </section><section class="slide" id="slide-9-6">
        <h2 id="standardisierung">Standardisierung</h2>
<p>Regeln aus <em>RFC 4180</em> und dem <em>W3C</em>-Standard</p>
<ul>
<li>Werte werden durch Kommas getrennt</li>
<li>Erste Zeile <em>kann</em> (RFC) / <em>sollte</em> (W3C) die Spaltennamen beinhalten</li>
<li>Zeilen <em>müssen</em> (RFC) / <em>sollten</em> (W3C) durch die Zeichenfolge <em>CRLF</em> (carriage return &amp; line feed) getrennt sein</li>
<li>Felder können von doppelten Anführungszeichen umfasst werden - dies ist notwendig, falls ein Feld ein Komma, ein doppeltes Anführungzeichen oder einen Zeilenumbruch enthält</li>
<li>Falls ein doppeltes Anführungszeichen (<code>&quot;</code>) innerhalb eines Felds vorkommt, muss es verdoppelt werden (<code>&quot;&quot;</code>)</li>
</ul>

      </section><section class="slide" id="slide-9-7">
        <h2 id="tsv">TSV</h2>
<p>In Anlehnung an CSV: <em>tab-separated values</em></p>
<p>Vorteile: eventuell besser zu lesen, Kommas müssen nicht escaped werden</p>
<p>Nachteile: nicht Standardisiert, weniger verbreitet</p>
<pre><code class="language-tsv">ISO    Country    Capital    Languages
AD    Andorra    Andorra la Vella    ES,FR
AE    United Arab Emirates    Abu Dhabi    AE,fa,en,hi,ur
AF    Afghanistan    Kabul    AF,tk</code></pre>

      </section><section class="slide" id="slide-9-8">
        <h2 id="übung">Übung</h2>
<p>Übung: selbst in VS Code einfache CSV-Datei anlegen und in Tabellenansicht begutachten (Icon <em>open in preview</em> rechts oben in der Ansicht)</p>

      </section></section><section class="section" id="section-10"><section class="slide" id="slide-10-1">
        <h1 id="json">JSON</h1>

      </section><section class="slide" id="slide-10-2">
        <h2 id="json">JSON</h2>
<p>JSON = <em>JavaScript Object Notation</em>: Datenformat, das insbesondere in der Webentwicklung wichtig ist.</p>

      </section><section class="slide" id="slide-10-3">
        <h2 id="datentypen">Datentypen</h2>
<ul>
<li>Number</li>
<li>String</li>
<li>Boolean</li>
<li>Null</li>
<li>Array</li>
<li>Object</li>
</ul>

      </section><section class="slide" id="slide-10-4">
        <h2 id="null">Null</h2>
<p>Der Ausdruck <code>null</code> symbolisiert, dass ein Wert fehlt oder unbekannt ist</p>
<pre><code class="language-json">null</code></pre>

      </section><section class="slide" id="slide-10-5">
        <h2 id="string">String</h2>
<p>Strings werden in JSON mit doppelten Anführungszeichen begrenzt</p>
<p>(In JavaScript wären als Alternative auch einfache Anführungszeichen erlaubt)</p>

      </section><section class="slide" id="slide-10-6">
        <h2 id="array">Array</h2>
<p>Ein <em>Array</em> beinhaltet eine Abfolge von anderen Objekten</p>
<pre><code class="language-json">[<span class="hljs-string">"Anne"</span>, <span class="hljs-string">"Bob"</span>, <span class="hljs-string">"Chris"</span>]</code></pre>
<pre><code class="language-json">[<span class="hljs-number">2</span>, <span class="hljs-number">3</span>, <span class="hljs-number">5</span>, <span class="hljs-number">7</span>, <span class="hljs-number">11</span>]</code></pre>

      </section><section class="slide" id="slide-10-7">
        <h2 id="objekt">Objekt</h2>
<p>Ein <em>Objekt</em> beinhaltet benannte Einträge</p>
<pre><code class="language-json">{
  <span class="hljs-attr">"firstName"</span>: <span class="hljs-string">"Thomas"</span>,
  <span class="hljs-attr">"lastName"</span>: <span class="hljs-string">"Edison"</span>,
  <span class="hljs-attr">"birthYear"</span>: <span class="hljs-number">1847</span>,
  <span class="hljs-attr">"living"</span>: <span class="hljs-literal">false</span>
}</code></pre>
<p>(In JavaScript könnten die Namen der Einträge auch ohne Anführungszeichen stehen, z.B. <code>firstName</code>)</p>

      </section></section><section class="section" id="section-11"><section class="slide" id="slide-11-1">
        <h1 id="xml">XML</h1>

      </section><section class="slide" id="slide-11-2">
        <h2 id="xml">XML</h2>
<p>XML = Extensible Markup Language</p>
<p>Sprache, die viele Ähnlichkeiten zu HTML hat</p>
<p>War lange Zeit eine sehr wichtige Standardsprache für Datenaustausch; wird zunehmend durch JSON ersetzt</p>

      </section><section class="slide" id="slide-11-3">
        <h2 id="xml">XML</h2>
<p>Beispiel</p>
<pre><code class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">person</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-name">name</span>&gt;</span>Adam<span class="hljs-tag">&lt;/<span class="hljs-name">name</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-name">age</span> <span class="hljs-attr">unit</span>=<span class="hljs-string">"years"</span>&gt;</span>40<span class="hljs-tag">&lt;/<span class="hljs-name">age</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">person</span>&gt;</span></code></pre>

      </section></section><section class="section" id="section-12"><section class="slide" id="slide-12-1">
        <h1 id="datenbanken">Datenbanken</h1>

      </section><section class="slide" id="slide-12-2">
        <h2 id="datenbanken">Datenbanken</h2>
<p>Verwendung: Verwaltung großer Datenmengen</p>

      </section><section class="slide" id="slide-12-3">
        <h2 id="tabellen-und-datenschemata">Tabellen und Datenschemata</h2>
<p>Die meisten Datenbanken verwalten ihre Daten in Tabellen</p>

      </section><section class="slide" id="slide-12-4">
        <h2 id="relationen-zwischen-tabellen">Relationen zwischen Tabellen</h2>
<ul>
<li><code>1 : 1</code></li>
<li><code>1 : n</code></li>
<li><code>m : n</code></li>
</ul>

      </section><section class="slide" id="slide-12-5">
        <h2 id="relationen-zwischen-tabellen-beispiele">Relationen zwischen Tabellen: Beispiele</h2>
<ul>
<li><code>0..1 : 1..1</code><br>department ←manages→ person</li>
<li><code>0..1 : 0..n</code><br>department ←works in→ person</li>
<li><code>0..m : 0..n</code><br>project ←works on→ person</li>
</ul>

      </section><section class="slide" id="slide-12-6">
        <h2 id="entity-relationship-model">Entity-Relationship-Model</h2>
<p><a href="https://en.wikipedia.org/wiki/Entity%E2%80%93relationship_model">https://en.wikipedia.org/wiki/Entity%E2%80%93relationship_model</a></p>

      </section></section><section class="section" id="section-13"><section class="slide" id="slide-13-1">
        <h1 id="sql-grundlagen">SQL Grundlagen</h1>

      </section><section class="slide" id="slide-13-2">
        <h2 id="sql">SQL</h2>
<p>SQL = Structured Query Language</p>
<p>Standardisierte Abfragesprache für tabellarische Datenbanken</p>

      </section><section class="slide" id="slide-13-3">
        <h2 id="sql-standardisierung">SQL Standardisierung</h2>
<p>Standardisiert von <em>ANSI</em> und <em>ISO</em> - allerdings weichen Implementierungen oft vom Standard ab</p>
<p>Die beste Unterstützung für standardisiertes SQL bietet wohl <em>PostgreSQL</em></p>
<p>Alte Entwürfe des Standards (kostenlos):</p>
<ul>
<li><a href="http://www.contrib.andrew.cmu.edu/~shadow/sql/sql1992.txt">SQL 1992 Entwurf (txt, 1.5 MB)</a></li>
<li><a href="www.wiscorp.com/sql20nn.zip">SQL 2011 Entwurf (zip von PDFs, 13 MB)</a></li>
</ul>

      </section><section class="slide" id="slide-13-4">
        <h2 id="sql-implementierungen">SQL Implementierungen</h2>
<p>open source:</p>
<ul>
<li>MySQL</li>
<li>MariaDB</li>
<li>PostgreSQL</li>
<li>SQLite</li>
</ul>
<p>proprietär:</p>
<ul>
<li>Oracle</li>
<li>SQL Server (Microsoft)</li>
</ul>
<p><a href="https://insights.stackoverflow.com/survey/2019#technology-_-databases">Popularität laut Stackoverflow Developer Survey</a></p>

      </section><section class="slide" id="slide-13-5">
        <h2 id="sql-ausprobieren">SQL ausprobieren</h2>
<p><a href="https://db-fiddle.com">https://db-fiddle.com</a> (PostgreSQL, MySQL, SQLite)</p>
<p><a href="https://www.w3schools.com/sql/trysql.asp?filename=trysql_select_all">https://www.w3schools.com/sql/trysql.asp?filename=trysql_select_all</a> (SQLite)</p>
<p>Desktop-Anwendung:</p>
<p><a href="https://sqlitebrowser.org/">https://sqlitebrowser.org/</a> (SQLite)</p>

      </section><section class="slide" id="slide-13-6">
        <h2 id="allgemeine-sql-syntax">Allgemeine SQL Syntax</h2>
<p>SQL Statements werden mit <code>;</code> beendet</p>
<p>Kommentare sind auf zwei Arten möglich:</p>
<pre><code class="language-sql"><span class="hljs-comment">/* mehrzeiliger
Kommentar */</span></code></pre>
<pre><code class="language-sql"><span class="hljs-comment">-- einzeiliger Kommentar</span></code></pre>

      </section><section class="slide" id="slide-13-7">
        <h2 id="allgemeine-sql-syntax">Allgemeine SQL Syntax</h2>
<p>SQL ist größtenteils <em>case-insensitive</em></p>
<p>Konvention: Keywords groß geschrieben, Rest meist klein und durch Unterstriche getrennt</p>
<p>Beispiel:</p>
<pre><code class="language-sql"><span class="hljs-keyword">SELECT</span> first_name, last_name, tel <span class="hljs-keyword">FROM</span> person;</code></pre>

      </section><section class="slide" id="slide-13-8">
        <h2 id="allgemeine-sql-syntax">Allgemeine SQL Syntax</h2>
<p>Tabellen- und Spaltennamen werden von SQL in Großschreibweise konvertiert, z.B. <code>first_name</code> → <code>FIRST_NAME</code>, <code>person</code> → <code>PERSON</code></p>
<p>Ausnahme: In <em>PostgreSQL</em> werden Namen in Kleinschreibweise konvertiert</p>

      </section><section class="slide" id="slide-13-9">
        <h2 id="allgemeine-sql-syntax">Allgemeine SQL Syntax</h2>
<p>Sollen Namen in exakter Schreibweise übernommen werden, müssen sie in Anführungszeichen gesetzt werden. Dies ist eher unüblich.</p>
<pre><code class="language-sql"><span class="hljs-keyword">SELECT</span> <span class="hljs-string">"First_Name"</span>, <span class="hljs-string">"Last_Name"</span>, <span class="hljs-string">"Tel"</span> <span class="hljs-keyword">FROM</span> <span class="hljs-string">"Person"</span>;</code></pre>
<p>Ausnahme: In <em>MySQL</em> würden hier Backticks (`) statt Anführungszeichen verwendet werden; hier kann über den Modus <code>ANSI_QUOTES</code> ein Standard-kompatibles Verhalten erreicht werden</p>

      </section><section class="slide" id="slide-13-10">
        <h2 id="übungsdaten">Übungsdaten</h2>
<p><a href="https://github.com/datasets">https://github.com/datasets</a></p>

      </section><section class="slide" id="slide-13-11">
        <h2 id="tabellen-erstellen">Tabellen erstellen</h2>
<p>Befehl: <code>CREATE TABLE</code></p>
<pre><code class="language-sql"><span class="hljs-keyword">CREATE</span> <span class="hljs-keyword">TABLE</span> person(
    <span class="hljs-keyword">name</span> <span class="hljs-built_in">VARCHAR</span>(<span class="hljs-number">50</span>),
    tel <span class="hljs-built_in">VARCHAR</span>(<span class="hljs-number">20</span>)
);</code></pre>

      </section><section class="slide" id="slide-13-12">
        <h2 id="sql-datentypen">SQL Datentypen</h2>
<p>ISO / ANSI SQL Standard (Auswahl):</p>
<ul>
<li><code>BOOLEAN</code></li>
<li><code>INT</code> / <code>INTEGER</code>, <code>SMALLINT</code>, <code>BIGINT</code></li>
<li><code>NUMERIC</code> / <code>DECIMAL</code></li>
<li><code>REAL</code>, <code>DOUBLE PRECISION</code></li>
<li><code>VARCHAR(n)</code></li>
<li><code>VARBINARY(n)</code></li>
<li><code>DATE</code>, <code>TIME</code>, <code>TIMESTAMP</code></li>
</ul>

      </section><section class="slide" id="slide-13-13">
        <h2 id="daten-eintragen">Daten eintragen</h2>
<pre><code class="language-sql"><span class="hljs-keyword">INSERT</span> <span class="hljs-keyword">INTO</span> person (<span class="hljs-keyword">name</span>, tel)
<span class="hljs-keyword">VALUES</span> (<span class="hljs-string">'John Smith'</span>, <span class="hljs-string">'012345'</span>);</code></pre>
<p>Kurzschreibweise:</p>
<pre><code class="language-sql"><span class="hljs-keyword">INSERT</span> <span class="hljs-keyword">INTO</span> person
<span class="hljs-keyword">VALUES</span> (<span class="hljs-string">'John Smith'</span>, <span class="hljs-string">'012345'</span>);</code></pre>

      </section><section class="slide" id="slide-13-14">
        <h2 id="daten-auslesen">Daten auslesen</h2>
<p>Daten aller Personen auslesen</p>
<pre><code class="language-sql"><span class="hljs-keyword">SELECT</span> <span class="hljs-keyword">name</span>, tel <span class="hljs-keyword">FROM</span> person;</code></pre>
<p>oder</p>
<pre><code class="language-sql"><span class="hljs-keyword">SELECT</span> * <span class="hljs-keyword">FROM</span> person;</code></pre>

      </section><section class="slide" id="slide-13-15">
        <h2 id="bedingte-abfragen-where">Bedingte Abfragen (WHERE)</h2>
<pre><code class="language-sql"><span class="hljs-keyword">SELECT</span> tel
<span class="hljs-keyword">FROM</span> person
<span class="hljs-keyword">WHERE</span> <span class="hljs-keyword">name</span> = <span class="hljs-string">'John Smith'</span>;</code></pre>
<pre><code class="language-sql"><span class="hljs-keyword">SELECT</span> tel
<span class="hljs-keyword">FROM</span> person
<span class="hljs-keyword">WHERE</span> <span class="hljs-keyword">name</span> <span class="hljs-keyword">LIKE</span> <span class="hljs-string">'% Smith'</span>
<span class="hljs-keyword">AND</span> tel <span class="hljs-keyword">LIKE</span> <span class="hljs-string">'+49%'</span>;</code></pre>

      </section><section class="slide" id="slide-13-16">
        <h2 id="daten-eintragen-update">Daten eintragen (UPDATE)</h2>
<pre><code class="language-sql"><span class="hljs-keyword">UPDATE</span> person
<span class="hljs-keyword">SET</span> <span class="hljs-keyword">name</span> = <span class="hljs-string">'John Miller'</span>
<span class="hljs-keyword">WHERE</span> <span class="hljs-keyword">name</span> = <span class="hljs-string">'John Smith'</span>;</code></pre>

      </section><section class="slide" id="slide-13-17">
        <h2 id="daten-löschen-delete">Daten löschen (DELETE)</h2>
<pre><code class="language-sql"><span class="hljs-keyword">DELETE</span> <span class="hljs-keyword">FROM</span> person
<span class="hljs-keyword">WHERE</span> <span class="hljs-keyword">name</span> = <span class="hljs-string">'John Miller'</span>;</code></pre>

      </section><section class="slide" id="slide-13-18">
        <h2 id="übung">Übung</h2>
<p>Erstellen und Abändern einer Kontaktdatenbank</p>

      </section></section><section class="section" id="section-14"><section class="slide" id="slide-14-1">
        <h1 id="sql-intermediate">SQL Intermediate</h1>

      </section><section class="slide" id="slide-14-2">
        <h2 id="online-tutorial">Online Tutorial</h2>
<p><a href="https://www.w3schools.com/sql/default.asp">https://www.w3schools.com/sql/default.asp</a></p>

      </section><section class="slide" id="slide-14-3">
        <h2 id="wiederholung-sql-datentypen">Wiederholung: SQL Datentypen</h2>
<p>ISO / ANSI SQL Standard (Auswahl):</p>
<ul>
<li><code>BOOLEAN</code></li>
<li><code>INT</code> / <code>INTEGER</code>, <code>SMALLINT</code>, <code>BIGINT</code></li>
<li><code>REAL</code>, <code>DOUBLE PRECISION</code></li>
<li><code>VARCHAR(n)</code></li>
<li><code>VARBINARY(n)</code></li>
<li><code>DATE</code>, <code>TIME</code>, <code>TIMESTAMP</code></li>
</ul>

      </section><section class="slide" id="slide-14-4">
        <h2 id="boolean">Boolean</h2>
<p>Werden durch die Ausdrücke <code>TRUE</code> und <code>FALSE</code> repräsentiert</p>
<p>Abweichungen vom Standard:</p>
<ul>
<li><em>SQL Server</em>: <code>BOOLEAN</code> → <code>BIT</code></li>
<li><em>MySQL</em>, <em>SQLite</em>, <em>Oracle</em>: nicht unterstützt, Alternativen z.B. <code>0</code> und <code>1</code></li>
</ul>

      </section><section class="slide" id="slide-14-5">
        <h2 id="zahlen">Zahlen</h2>
<ul>
<li><code>SMALLINT</code> (üblicherweise 16 Bit)</li>
<li><code>INT</code> / <code>INTEGER</code> (üblicherweise 32 Bit)</li>
<li><code>BIGINT</code> (üblicherweise 64 Bit)</li>
<li><code>NUMERIC</code> / <code>DECIMAL</code> (Dezimalzahlen mit variabler Genauigkeit)</li>
<li><code>REAL</code> (üblicherweise 32 Bit)</li>
<li><code>DOUBLE PRECISION</code> (üblicherweise 64 Bit)</li>
</ul>
<p>Abweichungen vom Standard:</p>
<ul>
<li><em>MySQL</em>: <code>REAL</code> → <code>FLOAT</code></li>
<li><em>SQLite</em>: Erlaubt für alle Typen 64 Bit Genauigkeit</li>
</ul>

      </section><section class="slide" id="slide-14-6">
        <h2 id="zahlen">Zahlen</h2>
<p>Dezimalzahl mit 10 Stellen vor und 2 Stellen nach dem Komma:</p>
<pre><code class="language-sql">DECIMAL(12, 2)</code></pre>

      </section><section class="slide" id="slide-14-7">
        <h2 id="zahlen">Zahlen</h2>
<p>MySQL unterscheidet z.B. zwischen:</p>
<ul>
<li><code>SMALLINT</code> (-32768 bis 32767)</li>
<li><code>UNSIGNED SMALLINT</code> (0 bis 65535)</li>
</ul>
<p>Dies ist nicht Teil des SQL Standards</p>

      </section><section class="slide" id="slide-14-8">
        <h2 id="text">Text</h2>
<ul>
<li><code>VARCHAR(10)</code>: Text der Maximallänge 10</li>
</ul>
<p>Üblicherweise wird Unicode unterstützt</p>
<p>Bei <em>SQL Server</em> sollte für Unicodeunterstütztung <code>NVARCHAR</code> verwendet werden (benötigt doppelt so viel Speicherplatz)</p>
<p>bei <em>Oracle</em> nennt sich der entsprechende Datentyp <code>VARCHAR2</code></p>
<p>Die Maximallänge hat keine Auswirkung auf den Speicherbedarf auf der Festplatte; allerdings kann sie den RAM-Verbrauch beim Lesen und Schreiben beeinflussen</p>

      </section><section class="slide" id="slide-14-9">
        <h2 id="text">Text</h2>
<p>Text wird <em>immer</em> mit einfachen Anführungszeichen begrenzt.</p>
<pre><code class="language-SQL"><span class="hljs-keyword">INSERT</span> <span class="hljs-keyword">INTO</span> <span class="hljs-keyword">test</span> <span class="hljs-keyword">VALUES</span> (<span class="hljs-string">'Hello'</span>);</code></pre>
<p>Escapen von einfachen Anführungszeichen durch Verdoppelung:</p>
<pre><code class="language-SQL"><span class="hljs-keyword">INSERT</span> <span class="hljs-keyword">INTO</span> <span class="hljs-keyword">test</span> <span class="hljs-keyword">VALUES</span> (<span class="hljs-string">'Let''s go'</span>);</code></pre>

      </section><section class="slide" id="slide-14-10">
        <h2 id="binärdaten">Binärdaten</h2>
<p><code>VARBINARY(n)</code>: Bytesequenz mit Maximallänge <em>n</em></p>
<p>Abweichungen vom Standard:</p>
<ul>
<li><em>PostgreSQL</em>: <code>BYTEA</code></li>
<li><em>SQLite</em>: Intern heißt der Datentyp <code>BLOB</code>, aber <code>VARBINARY</code> wird akzeptiert</li>
</ul>

      </section><section class="slide" id="slide-14-11">
        <h2 id="date-time">Date, Time</h2>
<p>Typen:</p>
<ul>
<li><code>DATE</code>: Datum</li>
<li><code>TIME</code>: Uhrzeit</li>
<li><code>TIMESTAMP</code>: Datum und Uhrzeit</li>
</ul>
<p>Beispiele:</p>
<ul>
<li><code>&#39;2013-02-14&#39;</code> (empfohlenes Format)</li>
<li><code>&#39;13:02:17&#39;</code>, <code>&#39;13:02:17.232&#39;</code></li>
<li><code>&#39;2013-02-14 13:02:17&#39;</code>, <code>&#39;2013-02-14T13:02:17&#39;</code></li>
</ul>

      </section><section class="slide" id="slide-14-12">
        <h2 id="date-time">Date, Time</h2>
<p>Abweichungen vom Standard:</p>
<ul>
<li>nicht von <code>SQLite</code> unterstützt</li>
<li><em>SQL Server</em>: <code>TIMESTAMP</code> → <code>DATETIME</code></li>
</ul>
<p>Einschränkungen:</p>
<ul>
<li>in <em>MySQL</em> ist <code>TIMESTAMP</code> auf Jahre zwischen 1970 und 2038 beschränkt - eine bessere Alternative ist <code>DATETIME</code></li>
</ul>

      </section><section class="slide" id="slide-14-13">
        <h2 id="resourcen-zu-datentypen">Resourcen zu Datentypen</h2>
<ul>
<li><a href="https://sqlite.org/datatype3.html">SQLite Datentypen</a></li>
<li><a href="https://www.postgresql.org/docs/current/datatype.html">Postgres Datentypen</a></li>
<li><a href="https://www.postgresql.org/docs/current/features.html">Postgres SQL Conformance</a></li>
</ul>

      </section><section class="slide" id="slide-14-14">
        <h2 id="beispiel-datenbank-chemischer-elemente">Beispiel: Datenbank chemischer Elemente</h2>
<p>Einträge:</p>
<ul>
<li><em>atomic_number</em></li>
<li><em>symbol</em></li>
<li><em>name</em></li>
<li><em>atomic_mass</em></li>
</ul>

      </section><section class="slide" id="slide-14-15">
        <h2 id="beispiel-datenbank-chemischer-elemente">Beispiel: Datenbank chemischer Elemente</h2>
<pre><code class="language-sql"><span class="hljs-keyword">CREATE</span> <span class="hljs-keyword">TABLE</span> <span class="hljs-keyword">element</span>(
    atomic_number <span class="hljs-built_in">INT</span>,
    symbol <span class="hljs-built_in">VARCHAR</span>(<span class="hljs-number">2</span>),
    <span class="hljs-keyword">name</span> <span class="hljs-built_in">VARCHAR</span>(<span class="hljs-number">20</span>),
    atomic_mass <span class="hljs-built_in">REAL</span>
);</code></pre>

      </section><section class="slide" id="slide-14-16">
        <h2 id="constraints">Constraints</h2>
<p>Einschränkungen von Spalten:</p>
<ul>
<li><code>NOT NULL</code></li>
<li><code>UNIQUE</code></li>
<li><code>PRIMARY KEY</code></li>
<li>(<code>FOREIGN KEY</code>)</li>
</ul>

      </section><section class="slide" id="slide-14-17">
        <h2 id="not-null">Not null</h2>
<p>Eintrag darf nicht leer gelassen werden</p>
<pre><code class="language-sql"><span class="hljs-keyword">CREATE</span> <span class="hljs-keyword">TABLE</span> <span class="hljs-keyword">element</span>(
    atomic_number <span class="hljs-built_in">INT</span> <span class="hljs-keyword">NOT</span> <span class="hljs-literal">NULL</span>,
    symbol <span class="hljs-built_in">VARCHAR</span>(<span class="hljs-number">3</span>) <span class="hljs-keyword">NOT</span> <span class="hljs-literal">NULL</span>,
    <span class="hljs-keyword">name</span> <span class="hljs-built_in">VARCHAR</span>(<span class="hljs-number">20</span>) <span class="hljs-keyword">NOT</span> <span class="hljs-literal">NULL</span>,
    atomic_mass <span class="hljs-built_in">REAL</span> <span class="hljs-keyword">NOT</span> <span class="hljs-literal">NULL</span>
);</code></pre>

      </section><section class="slide" id="slide-14-18">
        <h2 id="unique">Unique</h2>
<p>Jeder Eintrag in einer Spalte muss einzigartig sein</p>
<pre><code class="language-sql"><span class="hljs-keyword">CREATE</span> <span class="hljs-keyword">TABLE</span> <span class="hljs-keyword">element</span>(
    atomic_number <span class="hljs-built_in">INT</span> <span class="hljs-keyword">NOT</span> <span class="hljs-literal">NULL</span> <span class="hljs-keyword">UNIQUE</span>,
    symbol <span class="hljs-built_in">VARCHAR</span>(<span class="hljs-number">2</span>) <span class="hljs-keyword">NOT</span> <span class="hljs-literal">NULL</span> <span class="hljs-keyword">UNIQUE</span>,
    <span class="hljs-keyword">name</span> <span class="hljs-built_in">VARCHAR</span>(<span class="hljs-number">20</span>) <span class="hljs-keyword">NOT</span> <span class="hljs-literal">NULL</span> <span class="hljs-keyword">UNIQUE</span>,
    atomic_mass <span class="hljs-built_in">REAL</span> <span class="hljs-keyword">NOT</span> <span class="hljs-literal">NULL</span>
);</code></pre>

      </section><section class="slide" id="slide-14-19">
        <h2 id="primary-key">Primary key</h2>
<p>Ermöglicht eindeutige Identifizierung einer Zeile in einer Tabelle</p>
<ul>
<li>Sprechender Schlüssel: von Haus aus in den Daten enthalten</li>
<li>Surrogatschlüssel: zusätzlich hinzugefügter Schlüssel (meist Integerwert)</li>
</ul>
<p>Ein sprechender Schlüssel ist nur in besonderen Fällen einsetzbar, ein Surrogatschlüssel ist immer möglich</p>
<p>Ein Primary Key ist automatisch <em>unique</em> und <em>not null</em>.</p>

      </section><section class="slide" id="slide-14-20">
        <h2 id="primary-key">Primary key</h2>
<p>Sprechender Schlüssel:</p>
<pre><code class="language-sql"><span class="hljs-keyword">CREATE</span> <span class="hljs-keyword">TABLE</span> <span class="hljs-keyword">element</span>(
    atomic_number <span class="hljs-built_in">INT</span> PRIMARY <span class="hljs-keyword">KEY</span>,
    symbol <span class="hljs-built_in">VARCHAR</span>(<span class="hljs-number">2</span>) <span class="hljs-keyword">NOT</span> <span class="hljs-literal">NULL</span> <span class="hljs-keyword">UNIQUE</span>,
    <span class="hljs-keyword">name</span> <span class="hljs-built_in">VARCHAR</span>(<span class="hljs-number">20</span>) <span class="hljs-keyword">NOT</span> <span class="hljs-literal">NULL</span> <span class="hljs-keyword">UNIQUE</span>,
    atomic_mass <span class="hljs-built_in">REAL</span> <span class="hljs-keyword">NOT</span> <span class="hljs-literal">NULL</span>
);</code></pre>

      </section><section class="slide" id="slide-14-21">
        <h2 id="primary-key">Primary key</h2>
<p>Surrogatschlüssel:</p>
<pre><code class="language-sql"><span class="hljs-keyword">CREATE</span> <span class="hljs-keyword">TABLE</span> <span class="hljs-keyword">element</span>(
    <span class="hljs-keyword">id</span> <span class="hljs-built_in">INT</span> PRIMARY <span class="hljs-keyword">KEY</span>,
    atomic_numer <span class="hljs-built_in">INT</span>,
    symbol <span class="hljs-built_in">VARCHAR</span>(<span class="hljs-number">2</span>) <span class="hljs-keyword">NOT</span> <span class="hljs-literal">NULL</span> <span class="hljs-keyword">UNIQUE</span>,
    <span class="hljs-keyword">name</span> <span class="hljs-built_in">VARCHAR</span>(<span class="hljs-number">20</span>) <span class="hljs-keyword">NOT</span> <span class="hljs-literal">NULL</span> <span class="hljs-keyword">UNIQUE</span>,
    atomic_mass <span class="hljs-built_in">REAL</span> <span class="hljs-keyword">NOT</span> <span class="hljs-literal">NULL</span>
);</code></pre>

      </section><section class="slide" id="slide-14-22">
        <h2 id="auto-increment">Auto increment</h2>
<p>Automatisches Erstellen eines numerischen Primary Keys beginnend bei 1:</p>
<p>Standard SQL (implementiert in PostgreSQL, Oracle):</p>
<pre><code class="language-sql"><span class="hljs-keyword">CREATE</span> <span class="hljs-keyword">TABLE</span> <span class="hljs-keyword">element</span>(
    <span class="hljs-keyword">id</span> <span class="hljs-built_in">INT</span> PRIMARY <span class="hljs-keyword">KEY</span> <span class="hljs-keyword">GENERATED</span> <span class="hljs-keyword">ALWAYS</span> <span class="hljs-keyword">AS</span> <span class="hljs-keyword">IDENTITY</span>;
    ...
);</code></pre>

      </section><section class="slide" id="slide-14-23">
        <h2 id="auto-increment">Auto increment</h2>
<p>Nicht-standardisierte Varianten:</p>
<ul>
<li>MySQL: <code>AUTO_INCREMENT</code></li>
<li>SQLite: <code>AUTOINCREMENT</code></li>
<li>PostgreSQL: <code>SERIAL</code></li>
</ul>
<p>In SQLite wird immer automatisch ein numerischer eindeutiger Schlüssel unter dem Namen <code>rowid</code> angelegt.</p>

      </section><section class="slide" id="slide-14-24">
        <h2 id="indizes-in-datenbanken">Indizes in Datenbanken</h2>
<p>Generell: geordnete Listen können viel schneller durchsucht werden als ungeordnete (binäre Suche)</p>
<p>Beispiel: im Telefonbuch kann man schnell nach dem Nachnamen einer Person suchen, aber nicht nach dem Vornamen</p>
<p>Auf eine oder mehrere Spalten kann ein Index angewendet werden: Zusätzliche Datenstruktur, die auf die Daten in bestimmter Ordnung verweist.</p>

      </section><section class="slide" id="slide-14-25">
        <h2 id="indizes-erstellen">Indizes erstellen</h2>
<pre><code class="language-sql"><span class="hljs-keyword">CREATE</span> <span class="hljs-keyword">INDEX</span> idx_name
<span class="hljs-keyword">ON</span> <span class="hljs-keyword">element</span> (<span class="hljs-keyword">name</span>);</code></pre>
<p>Es kann nun nach den Elementnamen schneller gesucht werden</p>

      </section><section class="slide" id="slide-14-26">
        <h2 id="code-periodensystem">Code: Periodensystem</h2>
<pre><code class="language-sql"><span class="hljs-keyword">CREATE</span> <span class="hljs-keyword">TABLE</span> <span class="hljs-keyword">element</span>(
    atomic_number <span class="hljs-built_in">INT</span>,
    symbol <span class="hljs-built_in">VARCHAR</span>(<span class="hljs-number">2</span>) <span class="hljs-keyword">NOT</span> <span class="hljs-literal">NULL</span> <span class="hljs-keyword">UNIQUE</span>,
    <span class="hljs-keyword">name</span> <span class="hljs-built_in">VARCHAR</span>(<span class="hljs-number">20</span>) <span class="hljs-keyword">NOT</span> <span class="hljs-literal">NULL</span> <span class="hljs-keyword">UNIQUE</span>,
    atomic_mass <span class="hljs-built_in">REAL</span> <span class="hljs-keyword">NOT</span> <span class="hljs-literal">NULL</span>
);

<span class="hljs-keyword">CREATE</span> <span class="hljs-keyword">INDEX</span> idx_name
<span class="hljs-keyword">ON</span> <span class="hljs-keyword">element</span> (<span class="hljs-keyword">name</span>);

<span class="hljs-keyword">INSERT</span> <span class="hljs-keyword">INTO</span> <span class="hljs-keyword">element</span>(atomic_number, symbol, <span class="hljs-keyword">name</span>, atomic_mass)
<span class="hljs-keyword">VALUES</span> (<span class="hljs-number">1</span>, <span class="hljs-string">'H'</span>, <span class="hljs-string">'Hydrogen'</span>, <span class="hljs-number">1.008</span>);

<span class="hljs-keyword">INSERT</span> <span class="hljs-keyword">INTO</span> <span class="hljs-keyword">element</span>(atomic_number, symbol, <span class="hljs-keyword">name</span>, atomic_mass)
<span class="hljs-keyword">VALUES</span> (<span class="hljs-number">2</span>, <span class="hljs-string">'He'</span>, <span class="hljs-string">'Helium'</span>, <span class="hljs-number">4.0026</span>);

<span class="hljs-keyword">SELECT</span> *
<span class="hljs-keyword">FROM</span> <span class="hljs-keyword">element</span>
<span class="hljs-keyword">WHERE</span> <span class="hljs-keyword">name</span>=<span class="hljs-string">'Hydrogen'</span>;</code></pre>

      </section></section><section class="section" id="section-15"><section class="slide" id="slide-15-1">
        <h1 id="sql-joins">SQL Joins</h1>

      </section><section class="slide" id="slide-15-2">
        <h2 id="beispiel-musikdatenbank">Beispiel: Musikdatenbank</h2>
<p>Tabellen:</p>
<ul>
<li><em>artist</em></li>
<li><em>album</em></li>
<li><em>song</em></li>
</ul>
<p>Vorlage: Chinook Musikdatenbank</p>
<p><a href="https://github.com/lerocha/chinook-database">GitHub</a></p>
<p><a href="http://schemaspy.org/sample/index.html">Inspektor auf SchemaSpy</a></p>

      </section><section class="slide" id="slide-15-3">
        <h2 id="beispiel-musikdatenbank---artist">Beispiel: Musikdatenbank - artist</h2>
<pre><code class="language-sql"><span class="hljs-keyword">CREATE</span> <span class="hljs-keyword">TABLE</span> artist(
    <span class="hljs-keyword">id</span> <span class="hljs-built_in">INT</span> PRIMARY <span class="hljs-keyword">KEY</span> <span class="hljs-keyword">GENERATED</span> <span class="hljs-keyword">ALWAYS</span> <span class="hljs-keyword">AS</span> <span class="hljs-keyword">IDENTITY</span>,
    <span class="hljs-keyword">name</span> <span class="hljs-built_in">VARCHAR</span>(<span class="hljs-number">20</span>) <span class="hljs-keyword">NOT</span> <span class="hljs-literal">NULL</span>,
    country <span class="hljs-built_in">VARCHAR</span>(<span class="hljs-number">5</span>) <span class="hljs-keyword">NOT</span> <span class="hljs-literal">NULL</span>,
    <span class="hljs-keyword">year</span> <span class="hljs-built_in">SMALLINT</span> <span class="hljs-keyword">NOT</span> <span class="hljs-literal">NULL</span>
);

<span class="hljs-keyword">INSERT</span> <span class="hljs-keyword">INTO</span> artist (<span class="hljs-keyword">name</span>, country, <span class="hljs-keyword">year</span>)
<span class="hljs-keyword">VALUES</span> (<span class="hljs-string">'The Beatles'</span>, <span class="hljs-string">'UK'</span>, <span class="hljs-number">1960</span>);

<span class="hljs-keyword">INSERT</span> <span class="hljs-keyword">INTO</span> artist (<span class="hljs-keyword">name</span>, country, <span class="hljs-keyword">year</span>)
<span class="hljs-keyword">VALUES</span> (<span class="hljs-string">'AC/DC'</span>, <span class="hljs-string">'AUS'</span>, <span class="hljs-number">1973</span>);</code></pre>

      </section><section class="slide" id="slide-15-4">
        <h2 id="foreign-key">Foreign key</h2>
<p>Referenz auf jeweils einen Eintrag einer anderen Tabelle</p>
<p>z.B.: Jeder Eintrag in der Tabelle <em>song</em> kann über die Spalte <em>artist_id</em> mit der Tabelle <em>artist</em> verknüpft werden</p>
<p>Der Zusatz <code>FOREIGN KEY(column) REFERENCES other_table(column)</code> garantiert, dass ein entsprechender Eintrag in der anderen Tabelle existiert</p>

      </section><section class="slide" id="slide-15-5">
        <h2 id="foreign-key">Foreign key</h2>
<pre><code class="language-sql"><span class="hljs-keyword">CREATE</span> <span class="hljs-keyword">TABLE</span> song(
    <span class="hljs-keyword">id</span> <span class="hljs-built_in">INT</span> PRIMARY <span class="hljs-keyword">KEY</span> <span class="hljs-keyword">GENERATED</span> <span class="hljs-keyword">ALWAYS</span> <span class="hljs-keyword">AS</span> <span class="hljs-keyword">IDENTITY</span>,
    title <span class="hljs-built_in">VARCHAR</span>(<span class="hljs-number">30</span>) <span class="hljs-keyword">NOT</span> <span class="hljs-literal">NULL</span>,
    artist_id <span class="hljs-built_in">INT</span>,
    FOREIGN <span class="hljs-keyword">KEY</span>(artist_id) <span class="hljs-keyword">REFERENCES</span> artist(<span class="hljs-keyword">id</span>)
);

<span class="hljs-keyword">INSERT</span> <span class="hljs-keyword">INTO</span> song (title, artist_id)
<span class="hljs-keyword">VALUES</span> (<span class="hljs-string">'Let it Be'</span>, <span class="hljs-number">1</span>);</code></pre>

      </section><section class="slide" id="slide-15-6">
        <h2 id="foreign-key">Foreign key</h2>
<p>Ein foreign key garantiert, dass ein entsprechender Eintrag in der zugehörigen anderen Tabelle existiert</p>
<pre><code class="language-sql"><span class="hljs-keyword">INSERT</span> <span class="hljs-keyword">INTO</span> song (title, artist_id)
<span class="hljs-keyword">VALUES</span> (<span class="hljs-string">'Wish You Were Here'</span>, <span class="hljs-number">10</span>);</code></pre>
<p>→ Fehlermeldung</p>

      </section><section class="slide" id="slide-15-7">
        <h2 id="tabellen-verknüpfen-inner-join">Tabellen verknüpfen (INNER JOIN)</h2>
<pre><code class="language-sql"><span class="hljs-keyword">SELECT</span> song.title, artist.name
<span class="hljs-keyword">FROM</span> artist
<span class="hljs-keyword">INNER</span> <span class="hljs-keyword">JOIN</span> song
<span class="hljs-keyword">ON</span> artist.id=song.artist_id;</code></pre>
<p>Der obige Code listet alle Kombinationen auf, bei denen <code>artist.id</code> und <code>song.artist_id</code> übereinstimmen</p>

      </section><section class="slide" id="slide-15-8">
        <h2 id="tabellen-verknüpfen-left-join">Tabellen verknüpfen (LEFT JOIN)</h2>
<pre><code class="language-sql"><span class="hljs-keyword">SELECT</span> song.title, artist.name
<span class="hljs-keyword">FROM</span> song
<span class="hljs-keyword">LEFT</span> <span class="hljs-keyword">JOIN</span> artist
<span class="hljs-keyword">ON</span> artist.id=song.artist_id;</code></pre>
<p>Der obige Code listet alle Kombinationen auf und beinhaltet auch Lieder, für die kein Künstler definiert ist</p>

      </section></section><section class="section" id="section-16"><section class="slide" id="slide-16-1">
        <h1 id="mongodb">MongoDB</h1>

      </section><section class="slide" id="slide-16-2">
        <h2 id="mongodb-vs-sql">MongoDB vs SQL</h2>
<p>SQL:</p>
<ul>
<li>standardisierte Sprache, unabhängig von der verwendeten Programmiersprache</li>
<li>Verwendung aus Programmiersprachen oft über viele verschiedene <em>ORMs</em> (<em>object realtional mappings</em>)</li>
</ul>
<p>MongoDB:</p>
<ul>
<li><em>ein</em> Abfrageschema pro Programmiersprache</li>
</ul>

      </section><section class="slide" id="slide-16-3">
        <h2 id="mongodb-vs-sql">MongoDB vs SQL</h2>
<p>SQL:</p>
<ul>
<li>vordefiniertes Schema bei der Erstellung von Tabellen</li>
<li>Änderung eines Tabellenschemas (Migration) kann aufwändig sein</li>
</ul>
<p>MongoDB:</p>
<ul>
<li>Ein <em>Dokument</em> kann grundsätzlich Einträge beliebiger Struktur enthalten</li>
<li>Optional können</li>
</ul>

      </section><section class="slide" id="slide-16-4">
        <h2 id="mongodb-vs-sql">MongoDB vs SQL</h2>
<p>SQL:</p>
<ul>
<li>Skalierung hauptsächlich vertikal: Ergänzen von Resourcen bei einem bestehenden Server</li>
</ul>
<p>MongoDB:</p>
<ul>
<li>Skalierung hauptsächlich horizontal: Ergänzen zusätzlicher Server (via Sharding)</li>
</ul>

      </section><section class="slide" id="slide-16-5">
        <h2 id="mongodb-vs-sql">MongoDB vs SQL</h2>
<p>SQL:</p>
<ul>
<li>verwendet meist <em>atomare</em> Einträge (und erste Normalform)</li>
</ul>
<p>MongoDB:</p>
<ul>
<li>beinhaltet oft zusammengesetzte Einträge (Arrays, Objekte):</li>
</ul>
<pre><code class="language-json">{
  <span class="hljs-attr">"name"</span>: <span class="hljs-string">"sue"</span>,
  <span class="hljs-attr">"groups"</span>: [<span class="hljs-string">"news"</span>, <span class="hljs-string">"sports"</span>]
}</code></pre>

      </section><section class="slide" id="slide-16-6">
        <h2 id="mongodb">MongoDB</h2>
<p><em>MongoDB</em> ist eine sogenannte <em>dokumentorientierte</em> Datenbank</p>
<p>Ihre Struktur kann ähnlich aussehen wie die eines JSON-Dokuments</p>

      </section><section class="slide" id="slide-16-7">
        <h2 id="bson-dateiformat">BSON Dateiformat</h2>
<p>MongoDB basiert auf dem BSON Dateiformat. Dieses ähnelt JSON, ist aber ein binäres Format und lässt sich effizienter lesen und schreiben.</p>
<p>Der Export bzw Import geschieht mittels der Programme <code>mongodump</code> und <code>mongorestore</code></p>

      </section></section>

    </div>
    <div id="navigation-arrows">
      <svg version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" id="navigation-arrows-svg"
        xml:space="preserve" width="100%" height="100%" viewBox="-110 -110 220 220">
        <path class="arrow right" d="M70,-30L100,0L70,30" />
        <path class="arrow down" d="M-30,70L0,100L30,70" />
        <path class="arrow left" d="M-70,-30L-100,0L-70,30" />
        <path class="arrow up" d="M-30,-70L0,-100L30,-70" />
      </svg>
    </div>
  </div>
  <style>
    * {
      box-sizing: border-box;
    }

    body {
      width: 100vw;
      height: 100vh;
      margin: 0px;
      display: flex;
      justify-content: center;
      align-items: center;
      background-color: rgb(150, 150, 150);
      font-family: -apple-system, "Segoe UI", "Roboto", "Helvetica Neue", Arial, sans-serif;
      line-height: 1.5rem;
    }

    p, ul, pre {
      margin-top: 0;
    }

    ul {
      padding-left: 1.5rem;
    }

    h1, h2, h3 {
      margin-top: 0px;
      font-weight: 600;
    }

    h1 {
      margin-top: 5vh;
      text-align: center;
      font-size: 2rem;
    }

    h2 {
      margin-bottom: 1.5em;
    }

    svg {
      width: 100%;
      height: auto;
    }

    .section {
      height: 100%;
      display: none;
    }

    .section.active {
      display: block;
    }

    .slide {
      height: 100%;
      display: flex;
      flex-direction: column;
    }

    .slide.inactive {
      display: none;
    }

    #canvas {
      box-shadow: 0 0.5vh 1vh rgba(0, 0, 0, 0.3);
      background-color: #f8f8f8;
      position: relative;
      display: flex;
    }

    #canvas-content {
      width: 100%;
      height: 100%;
    }

    #canvas-content .note {
      display: none;
    }

    #canvas-content img {
      margin: 0px auto;
      display: block;
    }

    @media (min-aspect-ratio: 8/5) {

      html {
        font-size: 3.5vh;
      }

      /* wide screen */
      #canvas {
        width: calc(100vh / 5 * 8);
        height: 100vh;
        padding: 10vh;
        padding-top: 5vh;
      }
    }

    @media (max-aspect-ratio: 8/5) {

      html {
        font-size: calc(3.5vw * 5 / 8);
      }

      /* narrow screen */
      #canvas {
        width: 100vw;
        height: calc(100vw * 5 / 8);
        padding: calc(10vh * 5 / 8);
        padding-top: calc(5vh * 5 / 8);
      }
    }

    pre {
      background-color: rgb(224, 233, 240);
      box-shadow: 0 0.5vh 1vh rgba(0, 0, 0, 0.2);
      padding: 0.5em 1em;
      line-height: 1.2em;
      overflow: auto;
    }

    #navigation-arrows {
      position: absolute;
      right: 2rem;
      top: 2rem;
      height: 3rem;
      width: 3rem;
    }

    #navigation-arrows .arrow {
      stroke: lightblue;
      /*stroke-width: 0.8em; Chrome behaves differently with ems here */
      stroke-width: 16px;
      stroke-linecap: round;
      fill: none;
      cursor: pointer;
    }

    td,
    th {
      padding: 0.2em 0.8em;
    }

    th {
      text-align: start;
    }
  </style>
  <script>
    let presenterWindow;
    let activeSlide;
    let slideCount;

    const arrowUp = document.querySelector('.arrow.up');
    const arrowDown = document.querySelector('.arrow.down');
    const arrowRight = document.querySelector('.arrow.right');
    const arrowLeft = document.querySelector('.arrow.left');
    arrowUp.addEventListener('click',
      () => {activateSlideSafe(activeSlide[0], activeSlide[1] - 1);}
    );
    arrowDown.addEventListener('click',
      () => {activateSlideSafe(activeSlide[0], activeSlide[1] + 1);}
    );
    arrowLeft.addEventListener('click',
      () => {activateSlideSafe(activeSlide[0] - 1, 1);}
    );
    arrowRight.addEventListener('click',
      () => {activateSlideSafe(activeSlide[0] + 1, 1);}
    )
    const init = () => {
      slideCount = countSlides();
      activateSlideSafe(1, 1);
      addKeyControls();
      addSwipeControls();
      hideNoScriptMessage();
    }

    // count slides
    const countSlides = () => {
      const counts = [];
      return [...document.querySelectorAll('.section')].map(section => section.childNodes.length);
    }

    const updateVisible = () => {
      for (let section of document.querySelectorAll('.section')) {
        if (section.id === `section-${activeSlide[0]}`) {
          section.className = 'section active';
        } else {
          section.className = 'section inactive';
        }
      }
      for (let slide of document.querySelectorAll('.slide')) {
        if (slide.id === `slide-${activeSlide[0]}-${activeSlide[1]}`) {
          slide.className = 'slide active';
        } else {
          slide.className = 'slide inactive';
        }
      }
    }

    const updatePageArrows = () => {
      if (slideCount.length === 1) {
        arrowLeft.style.opacity = "0";
        arrowRight.style.opacity = "0";
      } else {
        const progressSections = (activeSlide[0] - 1) / (slideCount.length - 1);
        arrowLeft.style.opacity = progressSections.toString();
        arrowRight.style.opacity = (1 - progressSections).toString();
      }
      const slidesInActiveSection = slideCount[activeSlide[0] - 1]
      if (slidesInActiveSection === 1) {
        arrowUp.style.opacity = "0";
        arrowDown.style.opacity = "0";
      } else {
        const progressSlides = (activeSlide[1] - 1) / (slidesInActiveSection - 1);
        arrowUp.style.opacity = progressSlides.toString();
        arrowDown.style.opacity = (1 - progressSlides).toString();
      }
    }

    /**
     * Activate a slide if it exists, else do nothing
    */
    const activateSlideSafe = (sectionIndex, slideIndex) => {
      if (1 <= sectionIndex && sectionIndex <= slideCount.length && 1 <= slideIndex && slideIndex <= slideCount[sectionIndex - 1]) {
        activeSlide = [sectionIndex, slideIndex];
        updateVisible();
        updatePageArrows();
        scrolltoActiveSlide();
      }
    }

    const activateSlideNextSafe = () => {
      if (activeSlide[1] === slideCount[activeSlide[0] - 1]) {
        activateSlideSafe(activeSlide[0] + 1, 1);
      } else {
        activateSlideSafe(activeSlide[0], activeSlide[1] + 1);
      }
    }

    const activateSlideRightSafe = () => {
      activateSlideSafe(activeSlide[0] + 1, 1);
    }

    const activateSlideLeftSafe = () => {
      activateSlideSafe(activeSlide[0] - 1, 1);
    }

    const activateSlideDownSafe = () => {
      activateSlideSafe(activeSlide[0], activeSlide[1] + 1);
    }

    const activateSlideUpSafe = () => {
      activateSlideSafe(activeSlide[0], activeSlide[1] - 1);
    }

    const scrolltoActiveSlide = () => {
      const slideId = `#slide-${activeSlide[0]}-${activeSlide[1]}`;
      if (presenterWindow) {
        const activeSlide = presenterWindow.document.querySelector(slideId);
        if (activeSlide) {
          activeSlide.scrollIntoView();
        }
      }
    }

    const addKeyControls = () => {
      document.querySelector('body').addEventListener('keydown', event => {
        if (event.key === 'p') {
          const canvasContent = document.querySelector('#canvas-content').innerHTML;
          presenterWindow = window.open(document.URL, '_blank');
          presenterWindow.onload = () => {
            presenterWindow.document.querySelector('body').innerHTML = canvasContent;
          }
        }
        if (event.key === 'ArrowRight') {
          activateSlideRightSafe();
        } else if (event.key === 'ArrowLeft') {
          activateSlideLeftSafe();
        } else if (event.key === 'ArrowDown') {
          activateSlideDownSafe();
        } else if (event.key === 'ArrowUp') {
          activateSlideUpSafe();
        } else if (event.key === 'Enter') {
          activateSlideNextSafe();
        }
      });
    }

    const addSwipeControls = () => {

      const distance = 100;

      let startPos;
      let handled;

      document.addEventListener('touchstart', event => {
        startPos = event.touches[0];
        handled = false;
      });

      document.addEventListener('touchmove', event => {
        if (!handled) {
          let currentPos = event.touches[0];
          const xDiff = currentPos.clientX - startPos.clientX;
          const yDiff = currentPos.clientY - startPos.clientY;
          if (Math.abs(xDiff) > 2*Math.abs(yDiff) ||
              Math.abs(yDiff) > 2*Math.abs(xDiff)) {
            if (xDiff > distance) {
              activateSlideLeftSafe();
              handled = true;
            } else if (xDiff < -distance) {
              activateSlideRightSafe();
              handled = true;
            } else if (yDiff > distance) {
              activateSlideUpSafe();
              handled = true;
            } else if (yDiff < -distance) {
              activateSlideDownSafe();
              handled = true;
            }
          }
        }
      });
    }

    const hideNoScriptMessage = () => {
      document.querySelector("#no-script").innerHTML = "";
    }

    init();

  </script>
</body>

</html>