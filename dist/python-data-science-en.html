<!DOCTYPE html>

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta http-equiv="X-UA-Compatible" content="ie=edge">
  <title>Python & Data Science</title>
  <style>/*

Original highlight.js style (c) Ivan Sagalaev <maniac@softwaremaniacs.org>

*/

.hljs {
  display: block;
  overflow-x: auto;
  padding: 0.5em;
  background: #F0F0F0;
}


/* Base color: saturation 0; */

.hljs,
.hljs-subst {
  color: #444;
}

.hljs-comment {
  color: #888888;
}

.hljs-keyword,
.hljs-attribute,
.hljs-selector-tag,
.hljs-meta-keyword,
.hljs-doctag,
.hljs-name {
  font-weight: bold;
}


/* User color: hue: 0 */

.hljs-type,
.hljs-string,
.hljs-number,
.hljs-selector-id,
.hljs-selector-class,
.hljs-quote,
.hljs-template-tag,
.hljs-deletion {
  color: #880000;
}

.hljs-title,
.hljs-section {
  color: #880000;
  font-weight: bold;
}

.hljs-regexp,
.hljs-symbol,
.hljs-variable,
.hljs-template-variable,
.hljs-link,
.hljs-selector-attr,
.hljs-selector-pseudo {
  color: #BC6060;
}


/* Language color: hue: 90; */

.hljs-literal {
  color: #78A960;
}

.hljs-built_in,
.hljs-bullet,
.hljs-code,
.hljs-addition {
  color: #397300;
}


/* Meta color: hue: 200 */

.hljs-meta {
  color: #1f7199;
}

.hljs-meta-string {
  color: #4d99bf;
}


/* Misc effects */

.hljs-emphasis {
  font-style: italic;
}

.hljs-strong {
  font-weight: bold;
}
</style>
</head>

<body>
  <div id="canvas">
    <div id="no-script">
      Could not execute modern JavaScript code. Please switch to a modern browser,
      e.g. the most recent version of Firefox, Chrome or Edge and enable JavaScript.
    </div>
    <div id="canvas-content">

      <section class="section" id="section-1"><section class="slide" id="slide-1-1">
        <h1 id="title">Python & Data Science</h1>

      </section><section class="slide" id="slide-1-2">
        <h2 id="presentation-and-code">Presentation and code</h2>
<p>Presentations available at: <a href="https://karuga.eu/courses-presentations">https://karuga.eu/courses-presentations</a></p>
<p>Code available at: <a href="https://github.com/marko-knoebl/courses-code">https://github.com/marko-knoebl/courses-code</a></p>

      </section><section class="slide" id="slide-1-3">
        <h2 id="your-trainer">Your Trainer</h2>
<p>Marko Knöbl</p>
<ul>
<li>Frontend Web-Development<ul>
<li>JavaScript</li>
<li>React, Angular</li>
</ul>
</li>
<li>Programming<ul>
<li>Python, JavaScript</li>
</ul>
</li>
</ul>

      </section><section class="slide" id="slide-1-4">
        <h2 id="introduction-of-participants">Introduction of Participants</h2>
<ul>
<li>Name</li>
<li>Company</li>
<li>Current Projects</li>
<li>Prior Knowledge</li>
<li>Expectations</li>
</ul>

      </section><section class="slide" id="slide-1-5">
        <h2 id="organizational">Organizational</h2>
<ul>
<li>Duration</li>
<li>Breaks</li>
<li>Materials</li>
<li>Questions, Feedback?</li>
</ul>

      </section></section><section class="section" id="section-2"><section class="slide" id="slide-2-1">
        <h1 id="packages">Packages</h1>

      </section><section class="slide" id="slide-2-2">
        <h2 id="python-packages-for-data-science">Python packages for data science</h2>
<ul>
<li><em>Jupyter</em> &amp; <em>IPython</em>: interactive Python environments</li>
<li><em>NumPy</em>: library for efficient processing of numerical data</li>
<li><em>Pandas</em>: library for data analysis, based on NumPy</li>
<li><em>Matplotlib</em>: library for data visualization</li>
<li><em>Scikit-Learn</em>: library for machine learning, based on NumPy</li>
</ul>

      </section><section class="slide" id="slide-2-3">
        <h2 id="anaconda">Anaconda</h2>
<p><em>Anaconda</em> = Python distribution that includes many pre-installed packages and developer tools</p>
<p>Takes ~ 3 GB of disk space</p>

      </section><section class="slide" id="slide-2-4">
        <h2 id="anaconda-installation">Anaconda installation</h2>
<p>download from <a href="https://www.anaconda.com/distribution/">https://www.anaconda.com/distribution/</a></p>
<p>(make sure to download for the correct OS)</p>
<p>On Windows, the installation path should not contain spaces or underscores (recommendation: <code>C:/anaconda</code>) - see <a href="https://docs.anaconda.com/anaconda/user-guide/faq/#distribution-faq-windows-folder">https://docs.anaconda.com/anaconda/user-guide/faq/#distribution-faq-windows-folder</a></p>

      </section><section class="slide" id="slide-2-5">
        <h2 id="conda">Conda</h2>
<p><em>Conda</em> = management tool for Python packages and environments, used by Anaconda</p>
<p>Enables installation of multiple versions of Python and Python packages</p>
<p>Particularly useful for external libraries that are written in a compiled language</p>

      </section><section class="slide" id="slide-2-6">
        <h2 id="pyodide">Pyodide</h2>
<p><em>Pyodide</em> = Python distribution that can be run directly in the Browser (via <em>WebAssembly</em>)</p>

      </section></section><section class="section" id="section-3"><section class="slide" id="slide-3-1">
        <h1 id="jupyter--ipython">Jupyter &amp; IPython</h1>

      </section><section class="slide" id="slide-3-2">
        <h2 id="ipython">IPython</h2>
<p>IPython = advanced interactive Python console, supports features like autocompletion</p>

      </section><section class="slide" id="slide-3-3">
        <h2 id="jupyter-notebooks">Jupyter notebooks</h2>
<p>Jupyter notebook = interactive graphical Python environment, includes IPython functionalities</p>
<p>Jupyter is browser-based; the backend can be run on the local machine or can be hosted on a server</p>

      </section><section class="slide" id="slide-3-4">
        <h2 id="jupyter-notebooks---online">Jupyter notebooks - online</h2>
<p>Try Jupyter online:</p>
<h3 id="google-colab-google-account-needed">Google Colab (Google account needed)</h3>
<ul>
<li>Go to <a href="https://colab.research.google.com">https://colab.research.google.com</a></li>
<li>Select <em>File</em> - <em>New Python 3 Notebook</em></li>
</ul>
<h3 id="binder-limited-sessions">Binder (limited sessions)</h3>
<ul>
<li>Go to <a href="https://jupyter.org/try">https://jupyter.org/try</a></li>
<li>Select <em>Try Classic Notebook</em></li>
<li>wait ...</li>
<li>Select <em>File</em> - <em>New Notebook</em> - <em>Python 3</em></li>
</ul>

      </section><section class="slide" id="slide-3-5">
        <h2 id="jupyter-notebooks---locally">Jupyter notebooks - locally</h2>
<p>Launching Jupyter: Entry <em>Jupyter Notebook</em> in the start menu / terminal command <code>jupyter notebook</code></p>
<p>Stopping Jupyter: Press <em>Quit</em> in the top right corner of the directory tree view (usually under <a href="http://localhost:8888/tree">http://localhost:8888/tree</a>)</p>

      </section><section class="slide" id="slide-3-6">
        <h2 id="notebook-files">Notebook files</h2>
<p>Jupyter notebook files can be created via <em>new</em> - <em>Notebook: Python 3</em></p>
<p>Will be saved under <em>notebook.ipynb</em></p>
<p><em>Ipynb</em>: File format that can contain Python code, outputs, text documentation</p>

      </section><section class="slide" id="slide-3-7">
        <h2 id="writing-and-evaluating-code">Writing and evaluating code</h2>
<p>Write code into a cell, e.g.</p>
<pre><code class="language-py"><span class="hljs-keyword">import</span> time
time.sleep(<span class="hljs-number">3</span>)
<span class="hljs-string">"hello"</span></code></pre>
<p>and press <em>Shift</em> + <em>Enter</em></p>

      </section><section class="slide" id="slide-3-8">
        <h2 id="writing-and-evaluating-code">Writing and evaluating code</h2>
<p>IPython has numbered inputs, e.g. <code>In [1]</code></p>
<p>When a computation is ongoing it will display <code>In [*]</code></p>
<p>If the last statement in a cell evaluates to something it will be considered the output and displayed</p>
<p>In order to restart the notebook and re-evaluate all cells, press ⏩</p>

      </section><section class="slide" id="slide-3-9">
        <h2 id="accessing-the-last-output">Accessing the last output</h2>
<pre><code class="language-py">print(_ * <span class="hljs-number">3</span>)</code></pre>

      </section><section class="slide" id="slide-3-10">
        <h2 id="writing-documentation-via-markdown">Writing documentation via markdown</h2>
<p>We can add documentation via the standardized <em>markdown</em> language:</p>
<p>Change the dropdown from <em>Code</em> to <em>Markdown</em> and try the following code:</p>
<pre><code class="language-md"><span class="hljs-section"># Heading</span>

<span class="hljs-bullet">- </span>item 1
<span class="hljs-bullet">- </span>item 2</code></pre>
<p>Run the cell to display the result, double click to edit again</p>
<p><a href="https://github.com/adam-p/markdown-here/wiki/Markdown-Cheatsheet">markdown cheatsheet</a></p>

      </section><section class="slide" id="slide-3-11">
        <h2 id="documentation">Documentation</h2>
<p>displaying documentation in any Python console:</p>
<pre><code class="language-py">help(str)</code></pre>
<p>(navigate through long outputs via <em>Enter</em>, exit via <em>Q</em>)</p>
<p>shortcut for IPython / Jupyter:</p>
<pre><code class="language-ipython">str?</code></pre>

      </section><section class="slide" id="slide-3-12">
        <h2 id="tab-completion-and-wildcard-expressions">Tab completion and wildcard expressions</h2>
<pre><code class="language-ipython">*Error?</code></pre>

      </section><section class="slide" id="slide-3-13">
        <h2 id="running-terminal-commands">Running terminal commands</h2>
<p>IPython includes direct access to many terminal commands, e.g. <code>ls</code>, <code>cd</code>, ...</p>
<p>We can execute any terminal command by prefixing it with <code>!</code></p>

      </section></section><section class="section" id="section-4"><section class="slide" id="slide-4-1">
        <h1 id="numpy">NumPy</h1>

      </section><section class="slide" id="slide-4-2">
        <h2 id="numpy">NumPy</h2>
<p>Library for efficient data processing</p>
<p>Data are stored in multidimensional arrays of numeric values which are implemented in an efficient way</p>
<p>Data can represent images, sound, measurements and much more</p>

      </section><section class="slide" id="slide-4-3">
        <h2 id="numpy">NumPy</h2>
<p>common import convention:</p>
<pre><code class="language-python"><span class="hljs-keyword">import</span> numpy <span class="hljs-keyword">as</span> np</code></pre>

      </section><section class="slide" id="slide-4-4">
        <h2 id="numpy">NumPy</h2>
<p>NumPy Arrays vs Python lists:</p>
<p>Arrays are implemented in C; the entries (e.g. integers) are not Python Objects and are therefore lighter on resources</p>

      </section><section class="slide" id="slide-4-5">
        <h2 id="numpy">NumPy</h2>
<p>NumPy Arrays vs Python lists:</p>
<pre><code class="language-py"><span class="hljs-comment"># Python lists (with references to Python integer objects)</span>
list_a = [<span class="hljs-number">1</span>, <span class="hljs-number">2</span>]
list_b = [<span class="hljs-number">3</span>, <span class="hljs-number">4</span>]

<span class="hljs-comment"># NumPy array</span>
<span class="hljs-comment"># data are contained within the array without referencing</span>
<span class="hljs-comment"># Python integers</span>
array_a = numpy.array(list_a)
array_b = numpy.array(list_b)

<span class="hljs-comment"># fast multiplication (implemented in C)</span>
array_a * array_b</code></pre>

      </section><section class="slide" id="slide-4-6">
        <h2 id="arrays">Arrays</h2>
<p>Each array can only hold data of one type (e.g. only 64 bit floats or only bytes)</p>

      </section><section class="slide" id="slide-4-7">
        <h2 id="arrays">Arrays</h2>
<p>Creating a 2-dimensional array:</p>
<pre><code class="language-py">a2d = np.array([[<span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">3</span>], [<span class="hljs-number">2</span>, <span class="hljs-number">4</span>, <span class="hljs-number">6</span>], [<span class="hljs-number">3</span>, <span class="hljs-number">6</span>, <span class="hljs-number">9</span>]])</code></pre>
<p>output:</p>
<pre><code class="language-py">array([[<span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">3</span>],
       [<span class="hljs-number">2</span>, <span class="hljs-number">4</span>, <span class="hljs-number">6</span>],
       [<span class="hljs-number">3</span>, <span class="hljs-number">6</span>, <span class="hljs-number">9</span>]])</code></pre>

      </section><section class="slide" id="slide-4-8">
        <h2 id="arrays">Arrays</h2>
<p>Creating a 3-dimensional array:</p>
<pre><code class="language-py">a3d = np.array([[[<span class="hljs-number">1</span>, <span class="hljs-number">2</span>], [<span class="hljs-number">3</span>, <span class="hljs-number">4</span>]], [[<span class="hljs-number">5</span>, <span class="hljs-number">6</span>], [<span class="hljs-number">7</span>,<span class="hljs-number">8</span>]]])</code></pre>
<p>output:</p>
<pre><code class="language-py">array([[[<span class="hljs-number">1</span>, <span class="hljs-number">2</span>],
        [<span class="hljs-number">3</span>, <span class="hljs-number">4</span>]],

       [[<span class="hljs-number">5</span>, <span class="hljs-number">6</span>],
        [<span class="hljs-number">7</span>, <span class="hljs-number">8</span>]]])</code></pre>

      </section><section class="slide" id="slide-4-9">
        <h2 id="array-types">Array types</h2>
<p>Each array has a predefined data type for all entries</p>
<pre><code class="language-py">a = np.array([<span class="hljs-number">1</span>])
a.dtype <span class="hljs-comment"># int32</span>
b = np.array([<span class="hljs-number">1.0</span>])
b.dtype <span class="hljs-comment"># float64</span>
c = np.array([<span class="hljs-string">'abc'</span>])
c.dtype <span class="hljs-comment"># &lt;U3</span>
d = np.array([<span class="hljs-string">b'abc'</span>])
d.dtype <span class="hljs-comment"># |S3</span></code></pre>

      </section><section class="slide" id="slide-4-10">
        <h2 id="array-types">Array types</h2>
<p>Types may be stated explicitly:</p>
<pre><code class="language-py">a = np.array([<span class="hljs-number">1</span>], dtype=<span class="hljs-string">'int64'</span>)
b = np.array([<span class="hljs-number">1</span>], dtype=<span class="hljs-string">'uint8'</span>)</code></pre>
<p>If possible, types are converted automatically:</p>
<pre><code class="language-py">c = a + b
c.dtype <span class="hljs-comment"># int64</span></code></pre>

      </section><section class="slide" id="slide-4-11">
        <h2 id="array-types">Array types</h2>
<p>common types:</p>
<ul>
<li><em>bool</em> / <em>bool_</em> (stored as 8 bits)</li>
<li><em>int8</em>, <em>int16</em>, <em>int32</em>, <em>int64</em></li>
<li><em>uint8</em>, <em>uint16</em>, <em>uint32</em>, <em>uint64</em></li>
<li><em>float16</em>, <em>float32</em>, <em>float64</em></li>
</ul>

      </section><section class="slide" id="slide-4-12">
        <h2 id="overflow">Overflow</h2>
<p>Be careful with values that are too big or too small</p>
<p>The type <code>int8</code> is only suitable for values in the range from <code>-128</code> to <code>+127</code></p>
<pre><code class="language-py">np.array([<span class="hljs-number">127</span>, <span class="hljs-number">128</span>, <span class="hljs-number">129</span>], dtype=<span class="hljs-string">"int8"</span>)</code></pre>
<p>Output:</p>
<pre><code class="language-py">array([<span class="hljs-number">127</span>, <span class="hljs-number">-128</span>, <span class="hljs-number">-127</span>])</code></pre>

      </section><section class="slide" id="slide-4-13">
        <h2 id="array-shapes">Array shapes</h2>
<p>We can query:</p>
<ul>
<li><code>a3d.ndim</code>: 3</li>
<li><code>a3d.shape</code>: (2, 2, 2)</li>
<li><code>a3d.size</code>: 8</li>
</ul>

      </section><section class="slide" id="slide-4-14">
        <h2 id="operations-on-arrays">Operations on arrays</h2>
<p>Selecting entries:</p>
<pre><code class="language-py">a3d[<span class="hljs-number">0</span>, <span class="hljs-number">1</span>, <span class="hljs-number">0</span>] <span class="hljs-comment"># 3</span>

a3d[<span class="hljs-number">0</span>, :, <span class="hljs-number">0</span>] <span class="hljs-comment"># [1, 3]</span></code></pre>

      </section><section class="slide" id="slide-4-15">
        <h2 id="operations-on-arrays">Operations on arrays</h2>
<p>Operators are applied element-wise:</p>
<pre><code class="language-py">a = np.array([<span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">3</span>])
b = np.array([<span class="hljs-number">2</span>, <span class="hljs-number">2</span>, <span class="hljs-number">2</span>])

print(a + b)
<span class="hljs-comment"># np.array([3, 4, 5])</span>
print(a * b)
<span class="hljs-comment"># np.array([2, 4, 6])</span></code></pre>

      </section><section class="slide" id="slide-4-16">
        <h2 id="operations-on-arrays">Operations on arrays</h2>
<p>NumPy has special functions that are applied to arrays element-wise</p>
<pre><code class="language-py">a = np.array([<span class="hljs-number">0</span>, <span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">3</span>])

print(np.sin(a)) <span class="hljs-comment"># [0.0, 0.84147098, 0.9... ]</span>
print(np.sqrt(a)) <span class="hljs-comment"># [0.0, 1.0, 1.414... ]</span></code></pre>

      </section><section class="slide" id="slide-4-17">
        <h2 id="creating-arrays">Creating arrays</h2>
<p>creating a 2x6 array filled with 0:</p>
<pre><code class="language-py">np.zeros((<span class="hljs-number">2</span>, <span class="hljs-number">6</span>))
np.full((<span class="hljs-number">2</span>, <span class="hljs-number">6</span>), <span class="hljs-number">0</span>)</code></pre>
<p>creating a 3x3 array of random values:</p>
<pre><code class="language-py">np.random.random(<span class="hljs-number">3</span>, <span class="hljs-number">3</span>)</code></pre>

      </section><section class="slide" id="slide-4-18">
        <h2 id="creating-arrays">Creating arrays</h2>
<p>creating the sequence <em>0.0, 0.5, 1.0, 1.5</em>:</p>
<pre><code class="language-py"><span class="hljs-comment"># fixed step width (0.5)</span>
a = np.arange(<span class="hljs-number">0</span>, <span class="hljs-number">2</span>, <span class="hljs-number">0.5</span>)
<span class="hljs-comment"># fixed number of entries (4)</span>
b = np.linspace(<span class="hljs-number">0</span>, <span class="hljs-number">1.5</span>, <span class="hljs-number">4</span>)</code></pre>

      </section><section class="slide" id="slide-4-19">
        <h2 id="exercises">Exercises</h2>
<p>given an array of prices and an array of quantities, determine the total price:</p>
<pre><code class="language-py">prices = np.array([<span class="hljs-number">3.99</span>, <span class="hljs-number">4.99</span>, <span class="hljs-number">3.99</span>, <span class="hljs-number">12.99</span>])
<span class="hljs-comment"># buying the first item 3 times and the last item 2 times</span>
quantities = np.array([<span class="hljs-number">3</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>, <span class="hljs-number">2</span>])

<span class="hljs-comment"># solution: 37.95</span></code></pre>
<p>given the coordinates of the vertices of a triangle (in 2D or 3D), determine its centroid</p>
<pre><code class="language-py">a = np.array([<span class="hljs-number">5</span>, <span class="hljs-number">1</span>])
b = np.array([<span class="hljs-number">6</span>, <span class="hljs-number">8</span>])
c = np.array([<span class="hljs-number">1</span>, <span class="hljs-number">3</span>])

<span class="hljs-comment"># solution: [4, 4]</span></code></pre>

      </section><section class="slide" id="slide-4-20">
        <h2 id="slicing-arrays">Slicing arrays</h2>
<pre><code class="language-py">a2d = np.array([[<span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">3</span>], [<span class="hljs-number">2</span>, <span class="hljs-number">4</span>, <span class="hljs-number">6</span>], [<span class="hljs-number">3</span>, <span class="hljs-number">6</span>, <span class="hljs-number">9</span>]])

a2d[<span class="hljs-number">0</span>] <span class="hljs-comment"># [1, 2, 3]</span>
a2d[<span class="hljs-number">0</span>, :] <span class="hljs-comment"># [1, 2, 3]</span>
a2d[<span class="hljs-number">1</span>:, <span class="hljs-number">1</span>:] <span class="hljs-comment"># [[4, 6], [6, 9]]</span>
a2d[<span class="hljs-number">1</span>, ::<span class="hljs-number">-1</span>] <span class="hljs-comment"># [3, 2, 1]</span></code></pre>

      </section><section class="slide" id="slide-4-21">
        <h2 id="exercises">Exercises</h2>
<p>advanced: solving linear equations</p>

      </section></section><section class="section" id="section-5"><section class="slide" id="slide-5-1">
        <h1 id="plotting">Plotting</h1>

      </section><section class="slide" id="slide-5-2">
        <h2 id="plotting---advanced-plots">Plotting - advanced plots</h2>
<ul>
<li>plotting data points with more than 2 features<ul>
<li>advanced scatter plot (size, color)</li>
<li>scatter matrix</li>
</ul>
</li>
<li>plotting z = f(x, y)<ul>
<li>contour plots</li>
<li>3d plots</li>
</ul>
</li>
<li>plotting density of some distribution (advanced)<ul>
<li>histogram</li>
<li>box plot</li>
<li>kde</li>
<li>violin plot</li>
</ul>
</li>
<li>plotting density (2d)<ul>
<li>2d histogram (hist2d, hexbin)</li>
<li>kde</li>
</ul>
</li>
</ul>

      </section></section><section class="section" id="section-6"><section class="slide" id="slide-6-1">
        <h1 id="pandas">Pandas</h1>

      </section><section class="slide" id="slide-6-2">
        <h2 id="pandas">Pandas</h2>
<p><em>Pandas</em> is a data analysis library; it is based on <em>NumPy</em></p>
<pre><code class="language-py"><span class="hljs-keyword">import</span> pandas <span class="hljs-keyword">as</span> pd</code></pre>

      </section><section class="slide" id="slide-6-3">
        <h2 id="series-and-dataframe">Series and DataFrame</h2>
<ul>
<li><strong>Series</strong>: Collection of values for some keys (table column)</li>
<li><strong>DataFrame</strong>: Collection of associated series (table)</li>
</ul>
<p>Example:</p>
<table>
<thead>
<tr>
<th></th>
<th align="right">Area</th>
<th align="right">Population</th>
<th>Capital</th>
</tr>
</thead>
<tbody><tr>
<td>CN</td>
<td align="right">9.6</td>
<td align="right">1386</td>
<td>Beijing</td>
</tr>
<tr>
<td>RU</td>
<td align="right">17</td>
<td align="right">144</td>
<td>Moscow</td>
</tr>
<tr>
<td>US</td>
<td align="right">9.8</td>
<td align="right">327</td>
<td>Washington, D.C.</td>
</tr>
</tbody></table>

      </section><section class="slide" id="slide-6-4">
        <h2 id="creating-a-series">Creating a Series</h2>
<pre><code class="language-py">area = pd.Series({<span class="hljs-string">'CN'</span>: <span class="hljs-number">9.6</span>, <span class="hljs-string">'RU'</span>: <span class="hljs-number">17</span>, <span class="hljs-string">'US'</span>: <span class="hljs-number">9.8</span>})
population = pd.Series({<span class="hljs-string">'CN'</span>: <span class="hljs-number">1386</span>, <span class="hljs-string">'RU'</span>: <span class="hljs-number">144</span>, <span class="hljs-string">'US'</span>: <span class="hljs-number">327</span>})</code></pre>
<pre><code class="language-py">area = pd.Series([<span class="hljs-number">9.6</span>, <span class="hljs-number">17</span>, <span class="hljs-number">9.8</span>], [<span class="hljs-string">"CN"</span>, <span class="hljs-string">"RU"</span>, <span class="hljs-string">"US"</span>])
population = pd.Series([<span class="hljs-number">1386</span>, <span class="hljs-number">144</span>, <span class="hljs-number">327</span>], [<span class="hljs-string">"CN"</span>, <span class="hljs-string">"RU"</span>, <span class="hljs-string">"US"</span>])</code></pre>

      </section><section class="slide" id="slide-6-5">
        <h2 id="reading-values">Reading values</h2>
<pre><code class="language-py">area[<span class="hljs-number">0</span>] <span class="hljs-comment"># 9.6</span>

area[<span class="hljs-string">'CN'</span>] <span class="hljs-comment"># 9.6</span></code></pre>

      </section><section class="slide" id="slide-6-6">
        <h2 id="series">Series</h2>
<p>Each series has a specific data type</p>
<pre><code class="language-py">area.dtype <span class="hljs-comment"># float64</span></code></pre>
<p>Manually setting the datatype:</p>
<pre><code class="language-py">area = pd.Series({<span class="hljs-string">"CN"</span>: <span class="hljs-number">9.6</span>, <span class="hljs-string">"RU"</span>: <span class="hljs-number">17</span>, <span class="hljs-string">"US"</span>: <span class="hljs-number">9.8</span>},
                 dtype=<span class="hljs-string">"float32"</span>)</code></pre>

      </section><section class="slide" id="slide-6-7">
        <h2 id="dataframe">DataFrame</h2>
<pre><code class="language-py">countries = pd.DataFrame({
    <span class="hljs-string">'area'</span>: area,
    <span class="hljs-string">'population'</span>: population})</code></pre>

      </section></section><section class="section" id="section-7"><section class="slide" id="slide-7-1">
        <h1 id="importing-and-exporting-data">Importing and exporting data</h1>

      </section><section class="slide" id="slide-7-2">
        <h2 id="importing-and-exporting-data">Importing and exporting data</h2>
<p>data formats:</p>
<ul>
<li>CSV</li>
<li>Excel</li>
<li>JSON</li>
<li>HDF5 (efficient binary format)</li>
<li>SQL tables (via <em>SQLAlchemy</em>)</li>
</ul>

      </section><section class="slide" id="slide-7-3">
        <h2 id="importing-and-exporting-data">Importing and exporting data</h2>
<p>The following functions can import / export data from files. Imports may read files from online sources.</p>
<p>import: <code>pd.read_csv</code>, <code>pd.read_excel</code>, ...</p>
<p>export: <code>df.to_csv</code>, <code>df.to_excel</code>, ...</p>

      </section><section class="slide" id="slide-7-4">
        <h2 id="importing-csv">Importing CSV</h2>
<p>Example: Euribor (interest rates of European bonds)</p>
<pre><code class="language-py">euribor = pd.read_csv(
    <span class="hljs-string">"https://datahub.io/core/euribor/r/euribor-12m-monthly.csv"</span>
)</code></pre>

      </section><section class="slide" id="slide-7-5">
        <h2 id="importing-csv">Importing CSV</h2>
<p>Possible keyword arguments for <code>read_csv</code>:</p>
<ul>
<li><code>index_col</code>: identifies a column to be used as an index instead of a numerical index</li>
<li><code>header</code>: passing a value of <code>None</code> signifies that there is no header row</li>
<li><code>names</code>: column names to be used in the resulting <code>DataFrame</code></li>
<li><code>sep</code>: for specifying other separators than a comma</li>
<li><code>usecols</code>: for importing only specific columns</li>
<li><code>parse_dates</code>: expects a list of column names</li>
<li>...</li>
</ul>
<p>See also: <a href="https://pandas.pydata.org/pandas-docs/stable/reference/api/pandas.read_csv.html">https://pandas.pydata.org/pandas-docs/stable/reference/api/pandas.read_csv.html</a></p>

      </section><section class="slide" id="slide-7-6">
        <h2 id="importing-csv">Importing CSV</h2>
<p>Advanced Euribor example:</p>
<ul>
<li>parse the date</li>
<li>use the date as the index</li>
<li>only import the columns <em>date</em> and <em>rate</em></li>
</ul>
<pre><code class="language-py">euribor = pd.read_csv(
    <span class="hljs-string">"https://datahub.io/core/euribor/r/euribor-12m-monthly.csv"</span>,
    parse_dates=[<span class="hljs-string">"date"</span>],
    index_col=<span class="hljs-string">"date"</span>,
    usecols=[<span class="hljs-string">"date"</span>, <span class="hljs-string">"rate"</span>]
)</code></pre>

      </section><section class="slide" id="slide-7-7">
        <h2 id="importing-csv">Importing CSV</h2>
<p>Task: Import the following data sources, ensuring the data is formatted nicely:</p>
<ul>
<li>S&amp;P 500 monthly prices (US stock index): <a href="https://datahub.io/core/s-and-p-500/r/data.csv">https://datahub.io/core/s-and-p-500/r/data.csv</a></li>
<li>Exchange rates: <a href="https://datahub.io/core/us-euro-foreign-exchange-rate/r/monthly.csv">https://datahub.io/core/us-euro-foreign-exchange-rate/r/monthly.csv</a></li>
<li>Iris dataset (statistics of leaf sizes for iris flowers): <a href="http://archive.ics.uci.edu/ml/machine-learning-databases/iris/iris.data">http://archive.ics.uci.edu/ml/machine-learning-databases/iris/iris.data</a> (look up appropriate column names on the web)</li>
</ul>

      </section><section class="slide" id="slide-7-8">
        <h2 id="importing-csv">Importing CSV</h2>
<p>possible solutions:</p>
<pre><code class="language-py">iris = pd.read_csv(
    <span class="hljs-string">"http://archive.ics.uci.edu/ml/machine-learning-databases/iris/iris.data"</span>,
    header=<span class="hljs-keyword">None</span>,
    names=[<span class="hljs-string">"sepal_length"</span>, <span class="hljs-string">"sepal_width"</span>, <span class="hljs-string">"petal_length"</span>,
           <span class="hljs-string">"petal_width"</span>, <span class="hljs-string">"name"</span>])
sp500 = pd.read_csv(
    <span class="hljs-string">"https://datahub.io/core/s-and-p-500/r/data.csv"</span>,
    index_col=<span class="hljs-string">"Date"</span>,
    parse_dates=[<span class="hljs-string">"Date"</span>])
exchange_rates = pd.read_csv(
    <span class="hljs-string">"https://datahub.io/core/us-euro-foreign-exchange-rate/r/monthly.csv"</span>,
    parse_dates=[<span class="hljs-string">"Date"</span>])</code></pre>

      </section><section class="slide" id="slide-7-9">
        <h2 id="importing-and-exporting-data">Importing and exporting data</h2>
<p>Excel:</p>
<pre><code class="language-py">euribor.to_excel(<span class="hljs-string">'euribor.xlsx'</span>)
euribor = pd.read_excel(<span class="hljs-string">'euribor.xlsx'</span>, index_col=<span class="hljs-number">0</span>)</code></pre>
<p>HDF5 (<em>pytables</em> must be installed):</p>
<pre><code class="language-py">euribor.to_hdf(<span class="hljs-string">"data.hdf5"</span>, <span class="hljs-string">"euribor"</span>)
euribor = read_hdf(<span class="hljs-string">"data.hdf5"</span>, <span class="hljs-string">"euribor"</span>)</code></pre>

      </section></section><section class="section" id="section-8"><section class="slide" id="slide-8-1">
        <h1 id="pandas-querying-data">Pandas: Querying data</h1>

      </section><section class="slide" id="slide-8-2">
        <h2 id="querying-data-by-row-numbers--column-numbers">Querying data (by row numbers / column numbers)</h2>
<ul>
<li><code>df.iloc[5]</code>: row 5 (returns a <code>Series</code> object)</li>
<li><code>df.iloc[:5]</code>: first 5 rows (returns a <code>DataFrame</code> object)</li>
<li><code>df.iloc[10:20]</code>: rows 10-19</li>
<li><code>df.iloc[5, 1]</code>: row 5, column 1</li>
<li><code>df.iloc[5, [0, 2]]</code>: row 5, column 0 and 2</li>
</ul>

      </section><section class="slide" id="slide-8-3">
        <h2 id="querying-data-by-row-names--column-names">Querying data (by row names / column names)</h2>
<ul>
<li><code>df.index</code>: row names</li>
<li><code>df.columns</code>: column names</li>
</ul>
<!-- -->

<ul>
<li><code>df.loc[&quot;2009-01-02&quot;]</code>: Row by index value</li>
<li><code>df.loc[&quot;2009-01-01&quot;:&quot;2009-01-31&quot;]</code>: Row in a specified range (both values included)</li>
<li><code>df.loc[:, &quot;rate&quot;]</code>: column <code>&quot;rate&quot;</code></li>
<li><code>df[&quot;rate&quot;]</code>: column <code>&quot;rate&quot;</code> (short version)</li>
<li><code>df.rate</code>: column <code>&quot;rate&quot;</code> (extra short version - only works with no special characters)</li>
<li><code>df.loc[:, [&quot;rate&quot;, &quot;maturity_level&quot;]]</code>: two columns</li>
<li><code>df.loc[&quot;2009-01-02&quot;, &quot;rate&quot;]</code>: specific row and column</li>
</ul>

      </section><section class="slide" id="slide-8-4">
        <h2 id="sorting-rows">Sorting rows</h2>
<ul>
<li><code>df.sort_values(by=&quot;rate&quot;)</code></li>
<li><code>df.loc[&quot;2009-01-02&quot; : &quot;2009-12-31&quot;].sort_values(by=&quot;rate&quot;)</code></li>
<li><code>df.sort_index(ascending=False)</code></li>
</ul>

      </section><section class="slide" id="slide-8-5">
        <h2 id="sampling-data">Sampling data</h2>
<ul>
<li><code>df.sample()</code> - random entry</li>
<li><code>df.sample(5)</code> - five entries</li>
<li><code>df.sample(frac=0.1)</code> - 10% of all entries</li>
</ul>

      </section><section class="slide" id="slide-8-6">
        <h2 id="filtering-rows">Filtering rows</h2>
<p>via <em>boolean indexing</em> - which is applied by rows:</p>
<ul>
<li><code>df[df.rate &lt; 0]</code></li>
<li><code>df[df.length &lt; 0] = np.nan</code></li>
<li><code>df[df.name == &quot;Iris-setosa&quot;]</code></li>
<li><code>df[df.name.isin([&quot;Iris-setosa&quot;, &quot;Iris-virginica&quot;])])]</code></li>
</ul>

      </section><section class="slide" id="slide-8-7">
        <h2 id="filtering-rows">Filtering rows</h2>
<p>SQL template:</p>
<pre><code class="language-sql"><span class="hljs-keyword">SELECT</span> * <span class="hljs-keyword">FROM</span> df
<span class="hljs-keyword">WHERE</span> a &lt; b <span class="hljs-keyword">AND</span> b &lt; c</code></pre>
<p>Pandas:</p>
<pre><code class="language-py">df[(df.a &lt; df.b) &amp; (df.b &lt; df.c)]</code></pre>
<p>or</p>
<pre><code class="language-py">df.query(<span class="hljs-string">"a &lt; b &lt; c"</span>)</code></pre>

      </section><section class="slide" id="slide-8-8">
        <h2 id="exercises-euribor">Exercises (Euribor)</h2>
<ul>
<li>first entry</li>
<li>last entry</li>
<li>last 10 entries</li>
<li>entry from 2009-01-02</li>
<li>entries from the year 2009</li>
<li>...</li>
</ul>

      </section><section class="slide" id="slide-8-9">
        <h2 id="solutions-euribor">Solutions (Euribor)</h2>
<ul>
<li>first entry: <code>euribor.iloc[0]</code></li>
<li>last entry: <code>euribor.iloc[-1]</code></li>
<li>last 10 entries: <code>euribor.iloc[-10:]</code></li>
<li>entry from 2009-01-02: <code>euribor.loc[&quot;2009-01-02&quot;]</code></li>
<li>entries from the year 2009: <code>euribor.loc[&quot;2009-01-01&quot;: &quot;2009-12-31&quot;]</code></li>
</ul>

      </section><section class="slide" id="slide-8-10">
        <h2 id="exercises-iris">Exercises (Iris)</h2>
<ul>
<li>maximum <em>petal length</em> of <em>iris setosa</em> (without using <code>.max</code>)</li>
</ul>

      </section></section><section class="section" id="section-9"><section class="slide" id="slide-9-1">
        <h1 id="data-statistics">Data statistics</h1>

      </section><section class="slide" id="slide-9-2">
        <h2 id="data-statistics">Data statistics</h2>
<pre><code class="language-py">df.describe()</code></pre>

      </section><section class="slide" id="slide-9-3">
        <h2 id="statistics-on-a-data-frames--series">Statistics on a data frames / series</h2>
<pre><code class="language-py">countries.area.describe()</code></pre>
<pre><code class="language-txt">count     3.000000
mean     12.133333
std       4.215843
min       9.600000
25%       9.700000
50%       9.800000
75%      13.400000
max      17.000000
dtype: float64</code></pre>
<p>(see next slide for explanations)</p>

      </section><section class="slide" id="slide-9-4">
        <h2 id="statistics-on-series">Statistics on series</h2>
<pre><code class="language-py">countries.area.describe()</code></pre>
<p>The above computes the following data:</p>
<ul>
<li><code>area.count()</code></li>
<li><code>area.mean()</code></li>
<li><code>area.std()</code></li>
<li><code>area.quantile(0)</code> / <code>area.min()</code></li>
<li><code>area.quantile(0.25)</code></li>
<li><code>area.quantile(0.5)</code> / <code>area.median()</code></li>
<li><code>area.quantile(0.75)</code></li>
<li><code>area.quantile(1)</code> / <code>ara.max()</code></li>
</ul>

      </section><section class="slide" id="slide-9-5">
        <h2 id="statistical-quantities">Statistical quantities</h2>
<ul>
<li><em>std</em>: <em>Standard deviation</em></li>
<li><em>median</em>: half of the values are less and half are greater than the median</li>
<li><em>min</em>: all values are greater than the minimum</li>
<li><em>25%-quantile</em>: 25% of all values are less</li>
</ul>

      </section></section><section class="section" id="section-10"><section class="slide" id="slide-10-1">
        <h1 id="example-exchange-rates">Example: exchange rates</h1>

      </section><section class="slide" id="slide-10-2">
        <h2 id="exchange-rates">Exchange rates</h2>
<p><a href="https://datahub.io/core/exchange-rates/r/daily.csv">https://datahub.io/core/exchange-rates/r/daily.csv</a></p>
<p>Daily Exchange rates between USD and other countries</p>
<p>We will read exchange data - transform it so it only contains data for EUR-USD exchange rates and turn the dates into the index</p>

      </section><section class="slide" id="slide-10-3">
        <h2 id="exchange-rates">Exchange rates</h2>
<p>Solution:</p>
<pre><code class="language-py">er = pd.read_csv(
    <span class="hljs-string">"https://datahub.io/core/exchange-rates/r/daily.csv"</span>,
    parse_dates=[<span class="hljs-number">1</span>])

<span class="hljs-comment"># only select euro</span>
er_eur_full = er.loc[er.Country==<span class="hljs-string">"Euro"</span>]

<span class="hljs-comment"># now we can set the date as the index</span>
er_eur_dateindex = er_eur_full.set_index(<span class="hljs-string">'Date'</span>)

<span class="hljs-comment"># we can drop the country information</span>
er_eur = er_eur_dateindex.loc[:, <span class="hljs-string">'Value'</span>]</code></pre>

      </section></section><section class="section" id="section-11"><section class="slide" id="slide-11-1">
        <h1 id="pandas-changing-data">Pandas: changing data</h1>

      </section><section class="slide" id="slide-11-2">
        <h2 id="dropping-data">Dropping data</h2>
<p>dropping rows:</p>
<pre><code class="language-py">df2 = df1.drop([<span class="hljs-string">"CN"</span>, <span class="hljs-string">"US"</span>])</code></pre>
<p>dropping columns:</p>
<pre><code class="language-py">df2 = df1.drop(columns=[<span class="hljs-string">"pop"</span>])</code></pre>

      </section><section class="slide" id="slide-11-3">
        <h2 id="computing-derived-data">Computing derived data</h2>
<p>Adding a new column:</p>
<pre><code class="language-py">iris[<span class="hljs-string">"sepal_ratio"</span>] = iris[<span class="hljs-string">"sepal_length"</span>] / iris[<span class="hljs-string">"sepal_width"</span>]

iris[<span class="hljs-string">"sepal_ratio"</span>].mean()
iris[<span class="hljs-string">"sepal_ratio"</span>].std()

iris_setosa = iris.loc[
    iris[<span class="hljs-string">"name"</span>] == <span class="hljs-string">"Iris-setosa"</span>
]

iris_setosa[<span class="hljs-string">"sepal_ratio"</span>].mean()
iris_setosa[<span class="hljs-string">"sepal_ratio"</span>].std()</code></pre>

      </section><section class="slide" id="slide-11-4">
        <h2 id="computing-derived-data-via-numpy">Computing derived data via NumPy</h2>
<p>Task:</p>
<ul>
<li>Analyze the S&amp;P 500 monthly data and determine the monthly gain / loss in percent for each month</li>
<li>What was the biggest loss / gain in a month?</li>
</ul>

      </section><section class="slide" id="slide-11-5">
        <h2 id="computing-derived-data-via-numpy">Computing derived data via NumPy</h2>
<p>converting to NumPy array:</p>
<pre><code class="language-py">values_np = sp500[<span class="hljs-string">"SP500"</span>].to_numpy()</code></pre>
<p>differences of sequential months:</p>
<pre><code class="language-py">diffs = values_np[<span class="hljs-number">1</span>:] - values_np[:<span class="hljs-number">-1</span>]
<span class="hljs-comment"># add a single NaN to the front</span>
diffs = np.concatenate([
    np.array([float(<span class="hljs-string">'nan'</span>)]), diffs])</code></pre>
<p>adding to pandas data:</p>
<pre><code class="language-py">sp500[<span class="hljs-string">"Diff"</span>] = diffs
sp500[<span class="hljs-string">"Gain"</span>] = sp500[<span class="hljs-string">"Diff"</span>] / sp500[<span class="hljs-string">"SP500"</span>]</code></pre>

      </section><section class="slide" id="slide-11-6">
        <h2 id="setting-data">Setting data</h2>
<pre><code class="language-py">iris.iloc[<span class="hljs-number">0</span>, <span class="hljs-number">0</span>] = <span class="hljs-number">6</span>

iris.loc[:, <span class="hljs-string">"sepal_ratio"</span>] = float(<span class="hljs-string">'nan'</span>)</code></pre>

      </section></section><section class="section" id="section-12"><section class="slide" id="slide-12-1">
        <h1 id="missing-data">Missing data</h1>

      </section><section class="slide" id="slide-12-2">
        <h2 id="missing-data">Missing data</h2>
<p>In the exchange rate data there are some missing entries:</p>
<ul>
<li>some days are not present (weekends)</li>
<li>some days are stored as <code>NaN</code>s</li>
</ul>

      </section><section class="slide" id="slide-12-3">
        <h2 id="missing-data">Missing data</h2>
<p>removing any rows with missing data:</p>
<pre><code class="language-py">er = er.dropna()</code></pre>
<p>filling any rows with missing data with zeros:</p>
<pre><code class="language-py">er = er.fillna(<span class="hljs-number">0</span>)</code></pre>
<p>filling any missing data with the value from the previous row:</p>
<pre><code class="language-py">er = er.fillna(method=<span class="hljs-string">"backfill"</span>)</code></pre>

      </section><section class="slide" id="slide-12-4">
        <h2 id="missing-data">Missing data</h2>
<p>interpolating data:</p>
<pre><code class="language-py">er = er.intepolate()
er = er.interpolate(method=<span class="hljs-string">"spline"</span>)</code></pre>
<p>interpolating example:</p>
<pre><code class="language-py">url = <span class="hljs-string">'https://datahub.io/core/interest-rates-gb/r/data.csv'</span>

ir_uk = pd.read_csv(url, index_col=<span class="hljs-string">"date"</span>,
                    parse_dates=<span class="hljs-keyword">True</span>)

ir_uk_weekly = ir_uk.resample(<span class="hljs-string">'7d'</span>).interpolate()</code></pre>

      </section></section><section class="section" id="section-13"><section class="slide" id="slide-13-1">
        <h1 id="plotting">Plotting</h1>

      </section><section class="slide" id="slide-13-2">
        <h2 id="plotting">Plotting</h2>
<p>general procedure:</p>
<p>In Jupyter:</p>
<pre><code class="language-py">data_frame.plot()</code></pre>
<p>In the terminal:</p>
<pre><code class="language-py"><span class="hljs-keyword">import</span> matplotlib.pyplot <span class="hljs-keyword">as</span> plt

data_frame.plot()

<span class="hljs-comment"># show all figures that were created since the last</span>
<span class="hljs-comment"># call to .show()</span>
plt.show()</code></pre>

      </section><section class="slide" id="slide-13-3">
        <h2 id="plotting-functions">Plotting functions</h2>
<pre><code class="language-py"><span class="hljs-comment"># graph</span>
data.plot.line()
data.plot()
<span class="hljs-comment"># bar chart</span>
data.plot.bar()
<span class="hljs-comment"># box plot</span>
data.plot.box()
<span class="hljs-comment"># histogram</span>
data.plot.hist()
<span class="hljs-comment"># scatter plot</span>
data.plot.scatter(x=<span class="hljs-string">"colname_1"</span>, y=<span class="hljs-string">"colname_2"</span>)
<span class="hljs-comment"># scatter matrix</span>
<span class="hljs-keyword">from</span> pandas.plotting <span class="hljs-keyword">import</span> scatter_matrix
scatter_matrix(data)</code></pre>

      </section><section class="slide" id="slide-13-4">
        <h2 id="graphs">Graphs</h2>
<p>example:</p>
<pre><code class="language-py">euribor.plot.line()
sp500[<span class="hljs-string">"SP500"</span>].plot.line(figsize=(<span class="hljs-number">9</span>, <span class="hljs-number">6</span>))</code></pre>

      </section><section class="slide" id="slide-13-5">
        <h2 id="bar-charts">Bar charts</h2>
<p>example:</p>
<pre><code class="language-py">euribor.iloc[<span class="hljs-number">-36</span>:].plot.bar()</code></pre>
<p>exercise:</p>
<p>plot median <em>sepal-width</em> and <em>sepal-length</em> for all three types of flowers</p>

      </section><section class="slide" id="slide-13-6">
        <h2 id="box-plots">Box plots</h2>
<p>Display statistical data in a diagram (min, median, max, ...)</p>
<pre><code class="language-py">iris.plot.box()</code></pre>

      </section><section class="slide" id="slide-13-7">
        <h2 id="histograms">Histograms</h2>
<p>counts occurrences of certain values / value ranges</p>
<p>examples:</p>
<pre><code class="language-py">iris.sepal_lenght.plot.hist()</code></pre>
<pre><code class="language-py">iris.sepal_length.plot.hist(bins=<span class="hljs-number">30</span>)</code></pre>

      </section><section class="slide" id="slide-13-8">
        <h2 id="histograms">Histograms</h2>
<p>exercise:</p>
<p>simulate 10 million rolls of dice - each using 10 dice; plot the distribution of the sums as a histogram</p>

      </section><section class="slide" id="slide-13-9">
        <h2 id="scatter-plots">Scatter plots</h2>
<p>creates data points with two values - one on the x-axis and the other on the y-axis</p>
<pre><code class="language-py">iris.plot.scatter(x=<span class="hljs-string">"sepal_length"</span>, y=<span class="hljs-string">"sepal_width"</span>)</code></pre>
<p>task: scatter plot of just <em>Iris-setosa</em></p>

      </section><section class="slide" id="slide-13-10">
        <h2 id="scatter-matrix">Scatter matrix</h2>
<p>creates several scatter plots - if there are 4 data series it will create 4x4 plots (scatter plots and histograms)</p>
<pre><code class="language-py"><span class="hljs-keyword">from</span> pandas.plotting <span class="hljs-keyword">import</span> scatter_matrix

scatter_matrix(iris)</code></pre>

      </section></section><section class="section" id="section-14"><section class="slide" id="slide-14-1">
        <h1 id="numpy-advanced">NumPy advanced</h1>

      </section><section class="slide" id="slide-14-2">
        <h2 id="reshaping-arrays">Reshaping arrays</h2>
<pre><code class="language-py">array_1d = array_3d.ravel()
array_1d = array_3d.reshape(<span class="hljs-number">8</span>)
array_2d = array_3d.reshape(<span class="hljs-number">2</span>, <span class="hljs-number">4</span>)
array_2d = array_3d.reshape(<span class="hljs-number">2</span>, <span class="hljs-number">-1</span>) <span class="hljs-comment"># automatic second dimension</span>
array_2d_transposed = array_2d.T</code></pre>

      </section><section class="slide" id="slide-14-3">
        <h2 id="adding-an-extra-dimension">Adding an extra dimension</h2>
<p>Adding an extra dimension of length 1 via <code>newaxis</code> - turning a 2 x 2 array into a 2 x 2 x 1 array:</p>
<pre><code class="language-py">array_2d = np.array([[<span class="hljs-number">1</span>, <span class="hljs-number">2</span>], [<span class="hljs-number">3</span>, <span class="hljs-number">4</span>]])
array_3d = array_2d[:, :, np.newaxis]
<span class="hljs-comment"># [[[1], [2]], [[3], [4]]]</span></code></pre>

      </section><section class="slide" id="slide-14-4">
        <h2 id="slices-as-views">Slices as views</h2>
<p>In ordinary Python we can make a shallow copy of a list by slicing it - this works differently in NumPy (in order to improve efficiency):</p>
<pre><code class="language-py">list = [<span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">3</span>]
list_copy = list[:]
list_copy[<span class="hljs-number">0</span>] = <span class="hljs-number">10</span> <span class="hljs-comment"># does NOT change list</span>

array = np.array([<span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">3</span>])
array_view = array[:]
array_view[<span class="hljs-number">0</span>] = <span class="hljs-number">10</span> <span class="hljs-comment"># DOES change array</span></code></pre>

      </section><section class="slide" id="slide-14-5">
        <h2 id="copying-arrays">Copying arrays</h2>
<p>Arrays can be copied via <code>array.copy()</code></p>

      </section><section class="slide" id="slide-14-6">
        <h2 id="concatenating-arrays">Concatenating arrays</h2>
<p>concatenating horizontally:</p>
<pre><code class="language-py">np.concatenate([a2d, a2d])</code></pre>
<p>concatenating vertically:</p>
<pre><code class="language-py">np.concatenate([a2d, a2d], axis=<span class="hljs-number">1</span>)</code></pre>

      </section></section>

    </div>
    <div id="navigation-arrows">
      <svg version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" id="navigation-arrows-svg"
        xml:space="preserve" width="100%" height="100%" viewBox="-110 -110 220 220">
        <path class="arrow right" d="M70,-30L100,0L70,30" />
        <path class="arrow down" d="M-30,70L0,100L30,70" />
        <path class="arrow left" d="M-70,-30L-100,0L-70,30" />
        <path class="arrow up" d="M-30,-70L0,-100L30,-70" />
      </svg>
    </div>
  </div>
  <style>
    * {
      box-sizing: border-box;
    }

    body {
      width: 100vw;
      height: 100vh;
      margin: 0px;
      display: flex;
      justify-content: center;
      align-items: center;
      background-color: rgb(150, 150, 150);
      font-family: -apple-system, "Segoe UI", "Roboto", "Helvetica Neue", Arial, sans-serif;
      line-height: 1.5rem;
    }

    p, ul, pre {
      margin-top: 0;
    }

    ul {
      padding-left: 1.5rem;
    }

    h1, h2, h3 {
      margin-top: 0px;
      font-weight: 600;
    }

    h1 {
      margin-top: 5vh;
      text-align: center;
      font-size: 2rem;
    }

    h2 {
      margin-bottom: 1.5em;
    }

    svg {
      width: 100%;
      height: auto;
    }

    .section {
      height: 100%;
      display: none;
    }

    .section.active {
      display: block;
    }

    .slide {
      height: 100%;
      display: flex;
      flex-direction: column;
    }

    .slide.inactive {
      display: none;
    }

    #canvas {
      box-shadow: 0 0.5vh 1vh rgba(0, 0, 0, 0.3);
      background-color: #f8f8f8;
      position: relative;
      display: flex;
    }

    #canvas-content {
      width: 100%;
      height: 100%;
    }

    #canvas-content .note {
      display: none;
    }

    #canvas-content img {
      margin: 0px auto;
      display: block;
    }

    @media (min-aspect-ratio: 8/5) {

      html {
        font-size: 3.5vh;
      }

      /* wide screen */
      #canvas {
        width: calc(100vh / 5 * 8);
        height: 100vh;
        padding: 10vh;
        padding-top: 5vh;
      }
    }

    @media (max-aspect-ratio: 8/5) {

      html {
        font-size: calc(3.5vw * 5 / 8);
      }

      /* narrow screen */
      #canvas {
        width: 100vw;
        height: calc(100vw * 5 / 8);
        padding: calc(10vh * 5 / 8);
        padding-top: calc(5vh * 5 / 8);
      }
    }

    pre {
      background-color: rgb(224, 233, 240);
      box-shadow: 0 0.5vh 1vh rgba(0, 0, 0, 0.2);
      padding: 0.5em 1em;
      line-height: 1.2em;
      overflow: auto;
    }

    #navigation-arrows {
      position: absolute;
      right: 2rem;
      top: 2rem;
      height: 3rem;
      width: 3rem;
    }

    #navigation-arrows .arrow {
      stroke: lightblue;
      /*stroke-width: 0.8em; Chrome behaves differently with ems here */
      stroke-width: 16px;
      stroke-linecap: round;
      fill: none;
      cursor: pointer;
    }

    td,
    th {
      padding: 0.2em 0.8em;
    }

    th {
      text-align: start;
    }
  </style>
  <script>
    let presenterWindow;
    let activeSlide;
    let slideCount;

    const arrowUp = document.querySelector('.arrow.up');
    const arrowDown = document.querySelector('.arrow.down');
    const arrowRight = document.querySelector('.arrow.right');
    const arrowLeft = document.querySelector('.arrow.left');
    arrowUp.addEventListener('click',
      () => {activateSlideSafe(activeSlide[0], activeSlide[1] - 1);}
    );
    arrowDown.addEventListener('click',
      () => {activateSlideSafe(activeSlide[0], activeSlide[1] + 1);}
    );
    arrowLeft.addEventListener('click',
      () => {activateSlideSafe(activeSlide[0] - 1, 1);}
    );
    arrowRight.addEventListener('click',
      () => {activateSlideSafe(activeSlide[0] + 1, 1);}
    )
    const init = () => {
      slideCount = countSlides();
      activateSlideSafe(1, 1);
      addKeyControls();
      addSwipeControls();
      hideNoScriptMessage();
    }

    // count slides
    const countSlides = () => {
      const counts = [];
      return [...document.querySelectorAll('.section')].map(section => section.childNodes.length);
    }

    const updateVisible = () => {
      for (let section of document.querySelectorAll('.section')) {
        if (section.id === `section-${activeSlide[0]}`) {
          section.className = 'section active';
        } else {
          section.className = 'section inactive';
        }
      }
      for (let slide of document.querySelectorAll('.slide')) {
        if (slide.id === `slide-${activeSlide[0]}-${activeSlide[1]}`) {
          slide.className = 'slide active';
        } else {
          slide.className = 'slide inactive';
        }
      }
    }

    const updatePageArrows = () => {
      if (slideCount.length === 1) {
        arrowLeft.style.opacity = "0";
        arrowRight.style.opacity = "0";
      } else {
        const progressSections = (activeSlide[0] - 1) / (slideCount.length - 1);
        arrowLeft.style.opacity = progressSections.toString();
        arrowRight.style.opacity = (1 - progressSections).toString();
      }
      const slidesInActiveSection = slideCount[activeSlide[0] - 1]
      if (slidesInActiveSection === 1) {
        arrowUp.style.opacity = "0";
        arrowDown.style.opacity = "0";
      } else {
        const progressSlides = (activeSlide[1] - 1) / (slidesInActiveSection - 1);
        arrowUp.style.opacity = progressSlides.toString();
        arrowDown.style.opacity = (1 - progressSlides).toString();
      }
    }

    /**
     * Activate a slide if it exists, else do nothing
    */
    const activateSlideSafe = (sectionIndex, slideIndex) => {
      if (1 <= sectionIndex && sectionIndex <= slideCount.length && 1 <= slideIndex && slideIndex <= slideCount[sectionIndex - 1]) {
        activeSlide = [sectionIndex, slideIndex];
        updateVisible();
        updatePageArrows();
        scrolltoActiveSlide();
      }
    }

    const activateSlideNextSafe = () => {
      if (activeSlide[1] === slideCount[activeSlide[0] - 1]) {
        activateSlideSafe(activeSlide[0] + 1, 1);
      } else {
        activateSlideSafe(activeSlide[0], activeSlide[1] + 1);
      }
    }

    const activateSlideRightSafe = () => {
      activateSlideSafe(activeSlide[0] + 1, 1);
    }

    const activateSlideLeftSafe = () => {
      activateSlideSafe(activeSlide[0] - 1, 1);
    }

    const activateSlideDownSafe = () => {
      activateSlideSafe(activeSlide[0], activeSlide[1] + 1);
    }

    const activateSlideUpSafe = () => {
      activateSlideSafe(activeSlide[0], activeSlide[1] - 1);
    }

    const scrolltoActiveSlide = () => {
      const slideId = `#slide-${activeSlide[0]}-${activeSlide[1]}`;
      if (presenterWindow) {
        const activeSlide = presenterWindow.document.querySelector(slideId);
        if (activeSlide) {
          activeSlide.scrollIntoView();
        }
      }
    }

    const addKeyControls = () => {
      document.querySelector('body').addEventListener('keydown', event => {
        if (event.key === 'p') {
          const canvasContent = document.querySelector('#canvas-content').innerHTML;
          presenterWindow = window.open(document.URL, '_blank');
          presenterWindow.onload = () => {
            presenterWindow.document.querySelector('body').innerHTML = canvasContent;
          }
        }
        if (event.key === 'ArrowRight') {
          activateSlideRightSafe();
        } else if (event.key === 'ArrowLeft') {
          activateSlideLeftSafe();
        } else if (event.key === 'ArrowDown') {
          activateSlideDownSafe();
        } else if (event.key === 'ArrowUp') {
          activateSlideUpSafe();
        } else if (event.key === 'Enter') {
          activateSlideNextSafe();
        }
      });
    }

    const addSwipeControls = () => {

      const distance = 100;

      let startPos;
      let handled;

      document.addEventListener('touchstart', event => {
        startPos = event.touches[0];
        handled = false;
      });

      document.addEventListener('touchmove', event => {
        if (!handled) {
          let currentPos = event.touches[0];
          const xDiff = currentPos.clientX - startPos.clientX;
          const yDiff = currentPos.clientY - startPos.clientY;
          if (Math.abs(xDiff) > 2*Math.abs(yDiff) ||
              Math.abs(yDiff) > 2*Math.abs(xDiff)) {
            if (xDiff > distance) {
              activateSlideLeftSafe();
              handled = true;
            } else if (xDiff < -distance) {
              activateSlideRightSafe();
              handled = true;
            } else if (yDiff > distance) {
              activateSlideUpSafe();
              handled = true;
            } else if (yDiff < -distance) {
              activateSlideDownSafe();
              handled = true;
            }
          }
        }
      });
    }

    const hideNoScriptMessage = () => {
      document.querySelector("#no-script").innerHTML = "";
    }

    init();

  </script>
</body>

</html>